(()=>{"use strict";var e={74399:(e,t,r)=>{r(46727);const a=new Worker(new URL(r.p+r.u(176),r.b)),s=new Worker(new URL(r.p+r.u(226),r.b)),o=new Worker(new URL(r.p+r.u(213),r.b)),n=new MessageChannel;a.postMessage({action:"setPort"},[n.port1]),s.postMessage({action:"setPort",withWorker:"relay"},[n.port2]);const i=new MessageChannel;s.postMessage({action:"setPort",withWorker:"event"},[i.port1]),o.postMessage({action:"setPort"},[i.port2]);const l={getRelayStatus(e){let t={action:"status"},r={id:e,relayWork:t,type:"status"};return r},publish(e,t,r){let a={action:"publish",relays:t,event:e},s={action:"save"},o={id:r,relayWork:a,dbWork:s,type:"publish"};return o},getFeed(e,t){let{authors:r,limit:a=10,relays:s,since:o=0,until:n=Math.round(Date.now()/1e3)}=e,i={kinds:[1,2],since:o,until:n,limit:a};r?.length&&(i.authors=r),s=s.map((e=>p(e)));let l={action:"get",subName:"feed",filter:i,relays:s},d={action:"save"},u={id:t,relayWork:l,dbWork:d,type:"call"};return u},getProfiles(e,t){let{authors:r,relays:a}=e,s={kinds:[0]};r?.length&&(s.authors=r),a=a.map((e=>p(e)));let o={action:"get",subName:"profiles",filter:s,relays:a},n={action:"save"},i={id:t,relayWork:o,dbWork:n,type:"call"};return i},getEvents(e,t){let{ids:r,relays:a}=e,s={ids:r};a=a.map((e=>p(e)));let o={action:"get",subName:"events",filter:s,relays:a},n={action:"save"},i={id:t,relayWork:o,dbWork:n,type:"call"};return i},getNotes(e,t){let{authors:r,limit:a=10,until:s=Math.round(Date.now()/1e3),relays:o}=e,n={kinds:[1],authors:r,until:s,limit:a};o=o.map((e=>p(e)));let i={action:"get",subName:"events",filter:n,relays:o},l={action:"save"},d={id:t,relayWork:i,dbWork:l,type:"call"};return d},streamMainProfilesFollows(e,t){let{authors:r,relays:a}=e,s={kinds:[0,3],authors:r};a=a.map((e=>p(e)));let o={action:"stream",subName:"main",filter:s,relays:a},n={action:"stream",streamEvents:!0},i={id:t,relayWork:o,dbWork:n,type:"stream"};return i},streamMainMentions(e,t){let{authors:r,relays:a,limit:s=200}=e,o={kinds:[1],"#p":r,limit:s};a=a.map((e=>p(e)));let n={action:"stream",subName:"main",filter:o,relays:a,eose:!0},i={action:"stream",streamEvents:!0},l={id:t,relayWork:n,dbWork:i,type:"stream"};return l},streamMainIncomingMessages(e,t){let{authors:r,relays:a,limit:s=200}=e,o={kinds:[4],"#p":r,limit:s};a=a.map((e=>p(e)));let n={action:"stream",subName:"main",filter:o,relays:a,eose:!0},i={action:"stream",streamEvents:!0},l={id:t,relayWork:n,dbWork:i,type:"stream"};return l},streamMainOutgoingMessages(e,t){let{authors:r,relays:a,limit:s=200}=e,o={kinds:[4],authors:r,limit:s};a=a.map((e=>p(e)));let n={action:"stream",subName:"main",filter:o,relays:a,eose:!0},i={action:"stream",streamEvents:!0},l={id:t,relayWork:n,dbWork:i,type:"stream"};return l},streamPeerIncomingMessages(e,t){let{authors:r,peers:a,relays:s,limit:o=500}=e,n={kinds:[4],"#p":r,authors:a,limit:o};s=s.map((e=>p(e)));let i={action:"stream",subName:"page",filter:n,relays:s,eose:!0},l={action:"stream",streamEvents:!0},d={id:t,relayWork:i,dbWork:l,type:"stream"};return d},streamPeerOutgoingMessages(e,t){let{authors:r,peers:a,relays:s,limit:o=500}=e,n={kinds:[4],authors:r,"#p":a,limit:o};s=s.map((e=>p(e)));let i={action:"stream",subName:"page",filter:n,relays:s,eose:!0},l={action:"stream",streamEvents:!0},d={id:t,relayWork:i,dbWork:l,type:"stream"};return d},streamProfile(e,t){let{authors:r,relays:a}=e,s={kinds:[0],authors:r};a=a.map((e=>p(e)));let o={action:"stream",subName:"page",filter:s,relays:a},n={action:"stream",streamEvents:!0},i={id:t,relayWork:o,dbWork:n,type:"stream"};return i},dbStreamEvent(e,t){let{ids:r,relays:a}=e,s={ids:r};a=a.map((e=>p(e)));let o={action:"stream",subName:"page",filter:s,relays:a},n={action:"stream",streamEvents:!0,streamUpdates:!0,call:{name:"dbEvents",args:[r]}},i={id:t,relayWork:o,dbWork:n,type:"stream"};return i},dbStreamFollows(e,t){let{author:r,relays:a}=e,s={kinds:[3],authors:[r]};a=a.map((e=>p(e)));let o={action:"stream",subName:"page",filter:s,relays:a},n={action:"stream",streamEvents:!0,streamUpdates:!0,call:{name:"dbFollows",args:[r]}},i={id:t,relayWork:o,dbWork:n,type:"stream"};return i},dbStreamFollowers(e,t){let{author:r,relays:a}=e,s={kinds:[3],"#p":[r]};a=a.map((e=>p(e)));let o={action:"stream",subName:"page",filter:s,relays:a},n={action:"stream",streamEvents:!0,streamUpdates:!0,call:{name:"dbFollowers",args:[r]}},i={id:t,relayWork:o,dbWork:n,type:"stream"};return i},dbStreamTagKind(e,t){let{type:r,values:a,kinds:s,limit:o=500,relays:n}=e,i={["#"+r]:a,kinds:s,limit:o};n=n.map((e=>p(e)));let l={action:"stream",subName:"page",filter:i,relays:n},d={action:"stream",streamEvents:!0,call:{name:"dbTagKind",args:[r,a,s]}},u={id:t,relayWork:l,dbWork:d,type:"stream"};return u},dbSave(e,t){let r={action:"query",call:{name:"dbSave",args:[e]}},a={id:t,dbWork:r};return a},dbQuery(e,t){let r={action:"query",call:{name:"dbQuery",args:[e]}},a={id:t,dbWork:r};return a},dbEvent(e,t){let r={action:"query",call:{name:"dbEvent",args:[e]}},a={id:t,dbWork:r};return a},dbProfile(e,t){let r={action:"query",call:{name:"dbProfile",args:[e]}},a={id:t,dbWork:r};return a},dbFollows(e,t){let r={action:"query",call:{name:"dbFollows",args:[e]}},a={id:t,dbWork:r};return a},dbChats(e,t){let r={action:"query",call:{name:"dbChats",args:[e]}},a={id:t,dbWork:r};return a},dbMessages(e,t,r,a,s){let o={action:"query",call:{name:"dbMessages",args:[e,t,r,a]}},n={id:s,dbWork:o};return n},dbMentions(e,t,r,a){let s={action:"query",call:{name:"dbMentions",args:[e,t,r]}},o={id:a,dbWork:s};return o},dbUnreadMessagesCount(e,t,r,a){let s={action:"query",call:{name:"dbUnreadMessagesCount",args:[e,t,r]}},o={id:a,dbWork:s};return o},dbUnreadMentionsCount(e,t,r){let a={action:"query",call:{name:"dbUnreadMentionsCount",args:[e,t]}},s={id:r,dbWork:a};return s}};var d={};function u({data:e}){let{ticket:t}=e,{id:r,results:a,success:s,error:o,eose:n}=t;if(!d[r])return;let i="stream"===t.type||"update"===t.type||n;(!i||a||o||n)&&(self.postMessage({id:r,data:a,success:s,error:o,stream:i,eose:n}),i||delete d[r])}function m({data:e}){let{ticket:t}=e,{id:r,results:a,success:s,error:o}=t;if(!d[r])return;let n="stream"===t.type||"update"===t.type;(!n||a||o)&&(self.postMessage({id:r,data:a,success:s,error:o,stream:n}),n||delete d[r])}async function c({data:e}){let{name:t,args:r,id:o,cancel:n}="string"===typeof e?JSON.parse(e):e,i=d[o];if(n){if(!i)return;i.type="cancel",delete d[o]}else if(i){let e=l[t](...r,o);if(JSON.stringify(i.relayWork)===JSON.stringify(e.relayWork))return;e.type="update",i=e,d[o]=i}else i=l[t](...r,o),d[o]=i;if(i.relayWork){if(a.postMessage({action:"submit",ticket:i}),["stream","update"].includes(i.type)&&i.dbWork.call){let e=JSON.parse(JSON.stringify(i));e.dbWork.action="query",s.postMessage({action:"submit",ticket:e})}}else i.dbWork&&s.postMessage({action:"submit",ticket:i})}function p(e){let[t,...r]=e.trim().split("?");return"http"===t.slice(0,4)&&(t="ws"+t.slice(4)),"ws"!==t.slice(0,2)&&(t="wss://"+t),t.length&&"/"===t[t.length-1]&&(t=t.slice(0,-1)),[t,...r].join("?")}a.onmessage=u,s.onmessage=m,o.onmessage=m,self.onmessage=c}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,r.x=()=>{var e=r.O(void 0,[736],(()=>r(74399)));return e=r.O(e),e},(()=>{r.amdO={}})(),(()=>{var e=[];r.O=(t,a,s,o)=>{if(!a){var n=1/0;for(u=0;u<e.length;u++){for(var[a,s,o]=e[u],i=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(r.O).every((e=>r.O[e](a[l])))?a.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,s,o]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(a,s){if(1&s&&(a=this(a)),8&s)return a;if("object"===typeof a&&a){if(4&s&&a.__esModule)return a;if(16&s&&"function"===typeof a.then)return a}var o=Object.create(null);r.r(o);var n={};e=e||[null,t({}),t([]),t(t)];for(var i=2&s&&a;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>n[e]=()=>a[e]));return n["default"]=()=>a,r.d(o,n),o}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[]))})(),(()=>{r.u=e=>736===e?"js/vendor.95a6c3e8.js":"js/"+e+"."+{176:"7de6505e",213:"a59a56ac",226:"754ed06c"}[e]+".js"})(),(()=>{r.miniCssF=e=>"css/vendor.9d63c926.css"})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{r.j=399})(),(()=>{r.p=""})(),(()=>{r.b=self.location+"/../../";var e={399:1},t=t=>{var[a,o,n]=t;for(var i in o)r.o(o,i)&&(r.m[i]=o[i]);n&&n(r);while(a.length)e[a.pop()]=1;s(t)};r.f.i=(t,a)=>{e[t]||importScripts(r.p+r.u(t))};var a=globalThis["webpackChunkDostr"]=globalThis["webpackChunkDostr"]||[],s=a.push.bind(a);a.push=t})(),(()=>{var e=r.x;r.x=()=>r.e(736).then(e)})();r.x()})();