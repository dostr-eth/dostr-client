(globalThis["webpackChunkDostr"]=globalThis["webpackChunkDostr"]||[]).push([[896],{18403:(e,t,n)=>{"use strict";var s=n(19046)["default"];n(46727);var o=Object.create,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,r=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,d=(e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})},u=(e,t,n,s)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let o of l(t))c.call(e,o)||o===n||i(e,o,{get:()=>t[o],enumerable:!(s=a(t,o))||s.enumerable});return e},p=(e,t,n)=>(n=null!=e?o(r(e)):{},u(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)),h=e=>u(i({},"__esModule",{value:!0}),e),m={};d(m,{Kind:()=>S,SimplePool:()=>Z,finishEvent:()=>q,fj:()=>R,generatePrivateKey:()=>g,getBlankEvent:()=>$,getEventHash:()=>T,getPublicKey:()=>f,matchFilter:()=>z,matchFilters:()=>W,nip04:()=>B,nip05:()=>J,nip06:()=>se,nip111:()=>Le,nip19:()=>ue,nip26:()=>Ce,nip39:()=>Pe,nip57:()=>ze,relayInit:()=>V,serializeEvent:()=>M,signEvent:()=>O,utils:()=>k,validateEvent:()=>P,verifySignature:()=>I}),e.exports=h(m);var y=p(n(59493));function g(){return y.utils.bytesToHex(y.utils.randomPrivateKey())}function f(e){return y.utils.bytesToHex(y.schnorr.getPublicKey(e))}var w=p(n(59493)),b=n(25137),k={};d(k,{insertEventIntoAscendingList:()=>C,insertEventIntoDescendingList:()=>E,normalizeURL:()=>_,utf8Decoder:()=>v,utf8Encoder:()=>x});var v=new TextDecoder("utf-8"),x=new TextEncoder;function _(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function E(e,t){let n,s=0,o=e.length-1,i=s;if(o<0)i=0;else if(t.created_at<e[o].created_at)i=o+1;else if(t.created_at>=e[s].created_at)i=s;else while(1){if(o<=s+1){i=o;break}if(n=Math.floor(s+(o-s)/2),e[n].created_at>t.created_at)s=n;else{if(!(e[n].created_at<t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}function C(e,t){let n,s=0,o=e.length-1,i=s;if(o<0)i=0;else if(t.created_at>e[o].created_at)i=o+1;else if(t.created_at<=e[s].created_at)i=s;else while(1){if(o<=s+1){i=o;break}if(n=Math.floor(s+(o-s)/2),e[n].created_at<t.created_at)s=n;else{if(!(e[n].created_at>t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}var S=(e=>(e[e["Metadata"]=0]="Metadata",e[e["Text"]=1]="Text",e[e["RecommendRelay"]=2]="RecommendRelay",e[e["Contacts"]=3]="Contacts",e[e["EncryptedDirectMessage"]=4]="EncryptedDirectMessage",e[e["EventDeletion"]=5]="EventDeletion",e[e["Reaction"]=7]="Reaction",e[e["ChannelCreation"]=40]="ChannelCreation",e[e["ChannelMetadata"]=41]="ChannelMetadata",e[e["ChannelMessage"]=42]="ChannelMessage",e[e["ChannelHideMessage"]=43]="ChannelHideMessage",e[e["ChannelMuteUser"]=44]="ChannelMuteUser",e[e["Report"]=1984]="Report",e[e["ZapRequest"]=9734]="ZapRequest",e[e["Zap"]=9735]="Zap",e[e["RelayList"]=10002]="RelayList",e[e["ClientAuth"]=22242]="ClientAuth",e[e["Article"]=30023]="Article",e))(S||{});function $(){return{kind:255,content:"",tags:[],created_at:0}}function q(e,t){let n=e;return n.pubkey=f(t),n.id=T(n),n.sig=O(n,t),n}function M(e){if(!P(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function T(e){let t=(0,b.sha256)(x.encode(M(e)));return w.utils.bytesToHex(t)}function P(e){if("object"!==typeof e)return!1;if("number"!==typeof e.kind)return!1;if("string"!==typeof e.content)return!1;if("number"!==typeof e.created_at)return!1;if("string"!==typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"===typeof n[e])return!1}return!0}function I(e){return w.schnorr.verifySync(e.sig,T(e),e.pubkey)}function O(e,t){return w.utils.bytesToHex(w.schnorr.signSync(T(e),t))}function z(e,t){if(e.ids&&-1===e.ids.indexOf(t.id))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey))return!1;for(let n in e)if("#"===n[0]){let s=n.slice(1),o=e[`#${s}`];if(o&&!t.tags.find((([e,t])=>e===n.slice(1)&&-1!==o.indexOf(t))))return!1}return!(e.since&&t.created_at<e.since)&&!(e.until&&t.created_at>=e.until)}function W(e,t){for(let n=0;n<e.length;n++)if(z(e[n],t))return!0;return!1}var R={};function U(e,t){let n=t.length+3,s=e.indexOf(`"${t}":`)+n,o=e.slice(s).indexOf('"')+s+1;return e.slice(o,o+64)}function D(e,t){let n=t.length,s=e.indexOf(`"${t}":`)+n+3,o=e.slice(s),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function K(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let s=t+7+1+n,o=e.slice(s+1,80).indexOf('"');if(-1===o)return null;let i=s+1+o;return e.slice(s+1,i)}function j(e,t){return t===U(e,"id")}function N(e,t){return t===U(e,"pubkey")}function L(e,t){return t===D(e,"kind")}function V(e,t={}){let{listTimeout:n=3e3,getTimeout:s=3e3}=t;var o,i={},a={connect:[],disconnect:[],error:[],notice:[]},l={},r={};async function c(){return new Promise(((t,n)=>{try{o=new WebSocket(e)}catch(u){n(u)}o.onopen=()=>{a.connect.forEach((e=>e())),t()},o.onerror=()=>{a.error.forEach((e=>e())),n()},o.onclose=async()=>{a.disconnect.forEach((e=>e()))};let s,c=[];function d(){if(0===c.length)return clearInterval(s),void(s=null);var t=c.shift();if(!t)return;let n=K(t);if(n){let s=i[n];if(s&&s.alreadyHaveEvent&&s.alreadyHaveEvent(U(t,"id"),e))return}try{let e=JSON.parse(t);switch(e[0]){case"EVENT":let t=e[1],n=e[2];return void(P(n)&&i[t]&&(i[t].skipVerification||I(n))&&W(i[t].filters,n)&&(i[t],(l[t]?.event||[]).forEach((e=>e(n)))));case"EOSE":{let t=e[1];return void(t in l&&(l[t].eose.forEach((e=>e())),l[t].eose=[]))}case"OK":{let t=e[1],n=e[2],s=e[3]||"";return void(t in r&&(n?r[t].ok.forEach((e=>e())):r[t].failed.forEach((e=>e(s))),r[t].ok=[],r[t].failed=[]))}case"NOTICE":let s=e[1];return void a.notice.forEach((e=>e(s)))}}catch(u){return}}o.onmessage=e=>{c.push(e.data),s||(s=setInterval(d,0))}}))}function d(){return 1===o?.readyState}async function u(){d()||await c()}async function p(e){let t=JSON.stringify(e);if(d()||(await new Promise((e=>setTimeout(e,1e3))),d()))try{o.send(t)}catch(n){console.log(n)}}const h=(e,{skipVerification:t=!1,alreadyHaveEvent:n=null,id:s=Math.random().toString().slice(2)}={})=>{let o=s;return i[o]={id:o,filters:e,skipVerification:t,alreadyHaveEvent:n},p(["REQ",o,...e]),{sub:(s,i={})=>h(s||e,{skipVerification:i.skipVerification||t,alreadyHaveEvent:i.alreadyHaveEvent||n,id:o}),unsub:()=>{delete i[o],delete l[o],p(["CLOSE",o])},on:(e,t)=>{l[o]=l[o]||{event:[],eose:[]},l[o][e].push(t)},off:(e,t)=>{let n=l[o],s=n[e].indexOf(t);s>=0&&n[e].splice(s,1)}}};return{url:e,sub:h,on:(e,t)=>{a[e].push(t),"connect"===e&&1===o?.readyState&&t()},off:(e,t)=>{let n=a[e].indexOf(t);-1!==n&&a[e].splice(n,1)},list:(e,t)=>new Promise((s=>{let o=h(e,t),i=[],a=setTimeout((()=>{o.unsub(),s(i)}),n);o.on("eose",(()=>{o.unsub(),clearTimeout(a),s(i)})),o.on("event",(e=>{i.push(e)}))})),get:(e,t)=>new Promise((n=>{let o=h([e],t),i=setTimeout((()=>{o.unsub(),n(null)}),s);o.on("event",(e=>{o.unsub(),clearTimeout(i),n(e)}))})),publish(e){if(!e.id)throw new Error(`event ${e} has no id`);let t=e.id;return p(["EVENT",e]),{on:(e,n)=>{r[t]=r[t]||{ok:[],failed:[]},r[t][e].push(n)},off:(e,n)=>{let s=r[t];if(!s)return;let o=s[e].indexOf(n);o>=0&&s[e].splice(o,1)}}},connect:u,close(){a={connect:[],disconnect:[],error:[],notice:[]},l={},r={},o.readyState===WebSocket.OPEN&&o?.close()},get status(){return o?.readyState??3}}}d(R,{getHex64:()=>U,getInt:()=>D,getSubscriptionId:()=>K,matchEventId:()=>j,matchEventKind:()=>L,matchEventPubkey:()=>N});var Z=class{constructor(e={}){s(this,"_conn",void 0),s(this,"_seenOn",{}),s(this,"eoseSubTimeout",void 0),s(this,"getTimeout",void 0),this._conn={},this.eoseSubTimeout=e.eoseSubTimeout||3400,this.getTimeout=e.getTimeout||3400}close(e){e.forEach((e=>{let t=this._conn[_(e)];t&&t.close()}))}async ensureRelay(e){const t=_(e),n=this._conn[t];if(n&&1===n.status)return n;if(n)return await n.connect(),n;const s=V(t,{getTimeout:.9*this.getTimeout,listTimeout:.9*this.getTimeout});return this._conn[t]=s,await s.connect(),s}sub(e,t,n){let s=new Set,o={...n||{}};o.alreadyHaveEvent=(e,t)=>{if(n?.alreadyHaveEvent?.(e,t))return!0;let o=this._seenOn[e]||new Set;return o.add(t),this._seenOn[e]=o,s.has(e)};let i=[],a=new Set,l=new Set,r=e.length,c=!1,d=setTimeout((()=>{c=!0;for(let e of l.values())e()}),this.eoseSubTimeout);e.forEach((async e=>{let n;try{n=await this.ensureRelay(e)}catch(h){return void p()}if(!n)return;let u=n.sub(t,o);function p(){if(r--,0===r){clearTimeout(d);for(let e of l.values())e()}}u.on("event",(e=>{s.add(e.id);for(let t of a.values())t(e)})),u.on("eose",(()=>{c||p()})),i.push(u)}));let u={sub(e,t){return i.forEach((n=>n.sub(e,t))),u},unsub(){i.forEach((e=>e.unsub()))},on(e,t){"event"===e?a.add(t):"eose"===e&&l.add(t)},off(e,t){"event"===e?a.delete(t):"eose"===e&&l.delete(t)}};return u}get(e,t,n){return new Promise((s=>{let o=this.sub(e,[t],n),i=setTimeout((()=>{o.unsub(),s(null)}),this.getTimeout);o.on("event",(e=>{s(e),clearTimeout(i),o.unsub()}))}))}list(e,t,n){return new Promise((s=>{let o=[],i=this.sub(e,t,n);i.on("event",(e=>{o.push(e)})),i.on("eose",(()=>{i.unsub(),s(o)}))}))}publish(e,t){const n=[];return e.forEach((async e=>{let s;try{s=await this.ensureRelay(e),n.push(s.publish(t))}catch(o){}})),{on(t,s){n.forEach(((n,o)=>{n.on(t,(()=>s(e[o])))}))},off(){}}}seenOn(e){return Array.from(this._seenOn[e]?.values?.()||[])}},B={};d(B,{decrypt:()=>Y,encrypt:()=>H});var A=n(41654),F=p(n(59493)),Q=n(64999);async function H(e,t,n){const s=F.getSharedSecret(e,"02"+t),o=G(s);let i=Uint8Array.from((0,A.randomBytes)(16)),a=x.encode(n),l=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["encrypt"]),r=await crypto.subtle.encrypt({name:"AES-CBC",iv:i},l,a),c=Q.base64.encode(new Uint8Array(r)),d=Q.base64.encode(new Uint8Array(i.buffer));return`${c}?iv=${d}`}async function Y(e,t,n){let[s,o]=n.split("?iv="),i=F.getSharedSecret(e,"02"+t),a=G(i),l=await crypto.subtle.importKey("raw",a,{name:"AES-CBC"},!1,["decrypt"]),r=Q.base64.decode(s),c=Q.base64.decode(o),d=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},l,r),u=v.decode(d);return u}function G(e){return e.slice(1,33)}var X,J={};d(J,{queryProfile:()=>ne,searchDomain:()=>te,useFetchImplementation:()=>ee});try{X=fetch}catch{}function ee(e){X=e}async function te(e,t=""){try{let n=await(await X(`https://${e}/.well-known/nostr.json?name=${t}`)).json();return n.names}catch(n){return{}}}async function ne(e){let t,[n,s]=e.split("@");if(s||(s=n,n="_"),!n.match(/^[A-Za-z0-9-_]+$/))return null;if(!s.includes("."))return null;try{t=await(await X(`https://${s}/.well-known/nostr.json?name=${n}`)).json()}catch(a){return null}if(!t?.names?.[n])return null;let o=t.names[n],i=t.relays?.[o]||[];return{pubkey:o,relays:i}}var se={};d(se,{generateSeedWords:()=>ce,privateKeyFromSeedWords:()=>re,validateWords:()=>de});var oe=p(n(59493)),ie=n(88270),ae=n(79266),le=n(294);function re(e,t){let n=le.HDKey.fromMasterSeed((0,ae.mnemonicToSeedSync)(e,t)),s=n.derive("m/44'/1237'/0'/0/0").privateKey;if(!s)throw new Error("could not derive private key");return oe.utils.bytesToHex(s)}function ce(){return(0,ae.generateMnemonic)(ie.wordlist)}function de(e){return(0,ae.validateMnemonic)(e,ie.wordlist)}var ue={};d(ue,{decode:()=>ye,naddrEncode:()=>_e,neventEncode:()=>xe,noteEncode:()=>be,nprofileEncode:()=>ve,npubEncode:()=>we,nsecEncode:()=>fe});var pe=p(n(59493)),he=n(64999),me=5e3;function ye(e){let{prefix:t,words:n}=he.bech32.decode(e,me),s=new Uint8Array(he.bech32.fromWords(n));switch(t){case"nprofile":{let e=ge(s);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:pe.utils.bytesToHex(e[0][0]),relays:e[1]?e[1].map((e=>v.decode(e))):[]}}}case"nevent":{let e=ge(s);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nevent",data:{id:pe.utils.bytesToHex(e[0][0]),relays:e[1]?e[1].map((e=>v.decode(e))):[]}}}case"naddr":{let e=ge(s);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:v.decode(e[0][0]),pubkey:pe.utils.bytesToHex(e[2][0]),kind:parseInt(pe.utils.bytesToHex(e[3][0]),16),relays:e[1]?e[1].map((e=>v.decode(e))):[]}}}case"nsec":case"npub":case"note":return{type:t,data:pe.utils.bytesToHex(s)};default:throw new Error(`unknown prefix ${t}`)}}function ge(e){let t={},n=e;while(n.length>0){let e=n[0],s=n[1],o=n.slice(2,2+s);n=n.slice(2+s),o.length<s||(t[e]=t[e]||[],t[e].push(o))}return t}function fe(e){return ke("nsec",e)}function we(e){return ke("npub",e)}function be(e){return ke("note",e)}function ke(e,t){let n=pe.utils.hexToBytes(t),s=he.bech32.toWords(n);return he.bech32.encode(e,s,me)}function ve(e){let t=Ee({0:[pe.utils.hexToBytes(e.pubkey)],1:(e.relays||[]).map((e=>x.encode(e)))}),n=he.bech32.toWords(t);return he.bech32.encode("nprofile",n,me)}function xe(e){let t=Ee({0:[pe.utils.hexToBytes(e.id)],1:(e.relays||[]).map((e=>x.encode(e)))}),n=he.bech32.toWords(t);return he.bech32.encode("nevent",n,me)}function _e(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Ee({0:[x.encode(e.identifier)],1:(e.relays||[]).map((e=>x.encode(e))),2:[pe.utils.hexToBytes(e.pubkey)],3:[new Uint8Array(t)]}),s=he.bech32.toWords(n);return he.bech32.encode("naddr",s,me)}function Ee(e){let t=[];return Object.entries(e).forEach((([e,n])=>{n.forEach((n=>{let s=new Uint8Array(n.length+2);s.set([parseInt(e)],0),s.set([n.length],1),s.set(n,2),t.push(s)}))})),pe.utils.concatBytes(...t)}var Ce={};d(Ce,{createDelegation:()=>qe,getDelegator:()=>Me});var Se=p(n(59493)),$e=n(25137);function qe(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let s=n.join("&");if(""===s)throw new Error("refusing to create a delegation without any conditions");let o=(0,$e.sha256)(x.encode(`nostr:delegation:${t.pubkey}:${s}`)),i=Se.utils.bytesToHex(Se.schnorr.signSync(o,e));return{from:f(e),to:t.pubkey,cond:s,sig:i}}function Me(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],s=t[2],o=t[3],i=s.split("&");for(let l=0;l<i.length;l++){let[t,n,s]=i[l].split(/\b/);if(("kind"!==t||"="!==n||e.kind!==parseInt(s))&&(!("created_at"===t&&"<"===n&&e.created_at<parseInt(s))&&!("created_at"===t&&">"===n&&e.created_at>parseInt(s))))return null}let a=(0,$e.sha256)(x.encode(`nostr:delegation:${e.pubkey}:${s}`));return Se.schnorr.verifySync(o,a,n)?n:null}var Te,Pe={};d(Pe,{useFetchImplementation:()=>Ie,validateGithub:()=>Oe});try{Te=fetch}catch{}function Ie(e){Te=e}async function Oe(e,t,n){try{let s=await(await Te(`https://gist.github.com/${t}/${n}/raw`)).text();return s===`Verifying that I control the following Nostr public key: ${e}`}catch(s){return!1}}var ze={};d(ze,{getZapEndpoint:()=>De,makeZapReceipt:()=>Ne,makeZapRequest:()=>Ke,useFetchImplementation:()=>Ue,validateZapRequest:()=>je});var We,Re=n(64999);try{We=fetch}catch{}function Ue(e){We=e}async function De(e){try{let t="",{lud06:n,lud16:s}=JSON.parse(e.content);if(n){let{words:e}=Re.bech32.decode(n,1e3),s=Re.bech32.fromWords(e);t=v.decode(s)}else{if(!s)return null;{let[e,n]=s.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let o=await We(t),i=await o.json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch(t){}return null}function Ke({profile:e,event:t,amount:n,relays:s,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...s]]};return t&&i.tags.push(["e",t]),i}function je(e){let t;try{t=JSON.parse(e)}catch(i){return"Invalid zap request JSON."}if(!P(t))return"Zap request is not a valid Nostr event.";if(!I(t))return"Invalid signature on zap request.";let n=t.tags.find((([e,t])=>"p"===e&&t));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let s=t.tags.find((([e,t])=>"e"===e&&t));if(s&&!s[1].match(/^[a-f0-9]{64}$/))return"Zap request 'e' tag is not valid hex.";let o=t.tags.find((([e,t])=>"relays"===e&&t));return o?null:"Zap request doesn't have a 'relays' tag."}function Ne({zapRequest:e,preimage:t,bolt11:n,paidAt:s}){let o=JSON.parse(e),i=o.tags.filter((([e])=>"e"===e||"p"===e||"a"===e)),a={kind:9735,created_at:Math.round(s.getTime()/1e3),content:"",tags:[...i,["bolt11",n],["description",e]]};return t&&a.tags.push(["preimage",t]),a}var Le={};d(Le,{loginWithX:()=>He,privateKeyFromX:()=>Fe,registerWithX:()=>Qe,signInWithX:()=>Ye,signInWithXStandalone:()=>Ge,useFetchImplementation:()=>Ae});var Ve=p(n(59493)),Ze=n(81535),Be=n(25137);try{fetch}catch{}function Ae(e){e}async function Fe(e,t,n,s){if(n.length<64)throw new Error("Signature too short; length should be 65 bytes");let o=await(0,Be.sha256)(Ve.utils.hexToBytes(n.toLowerCase().startsWith("0x")?n.slice(2):n)),i=`${t}:${e}`,a=await(0,Be.sha256)(`${i}:${s||""}:${n.slice(-64)}`),l=await(0,Ze.hkdf)(Be.sha256,o,a,i,42);return Ve.utils.bytesToHex(Ve.utils.hashToPrivateKey(l))}var Qe=Fe,He=Ye;async function Ye(e,t,n,s){let o=null,i=e;if(e.includes(".")){try{o=await ne(e)}catch(r){throw console.log(r),new Error("Nostr Profile Not Found")}if(null==o)throw new Error("Nostr Profile Not Found");i=2==e.split("@").length?e.split("@")[0]:e.split(".")[0]}let a=await Fe(e,t,n,s),l=f(a);if(o?.pubkey&&l!==o.pubkey)throw new Error("Invalid Signature/Password");return{petname:i,profile:o,privkey:a}}async function Ge(e,t,n,s){let o=e;e.includes(".")&&(o=2==e.split("@").length?e.split("@")[0]:e.split(".")[0]);let i=await Fe(e,t,n,s),a=f(i);return{petname:o,pubkey:a}}var Xe=p(n(59493)),Je=n(76253),et=n(25137);Xe.utils.hmacSha256Sync=(e,...t)=>(0,Je.hmac)(et.sha256,e,Xe.utils.concatBytes(...t)),Xe.utils.sha256Sync=(...e)=>(0,et.sha256)(Xe.utils.concatBytes(...e))},91574:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ds});var s=n(59835),o=n(61957);const i=["href"],a=["href"],l={id:"layout-container",ripple:!1,class:"backdrop"},r={id:"left-drawer",class:"flex justify-end",style:{"margin-right":"25px"}},c={id:"middle-page"},d={key:0,id:"post-entry",unelevated:"",class:"gt-xs flex column align-self relative-position"},u=(0,s._)("div",{id:"bottom-drawer-placeholder"},null,-1),p={id:"right-drawer",class:"flex justify-start"},h={key:0,id:"bottom-message-entry",unelevated:"",class:"flex column align-self relative-position q-px-md"},m={key:1,id:"bottom-post-entry-top-border"},y={key:2,id:"bottom-post-entry",unelevated:"",class:"flex column align-self relative-position q-px-md"},g=(0,s.Uk)(" CLICK TO COLLAPSE/EXPAND OR DRAG TO MOVE "),f=(0,s.Uk)("FORWARD"),w=(0,s.Uk)("SCROLL TO TOP"),b=(0,s.Uk)("BACK");function k(e,t,n,k,v,x){const _=(0,s.up)("TheKeyInitializationDialog"),E=(0,s.up)("q-dialog"),C=(0,s.up)("TheUserMenu"),S=(0,s.up)("router-view"),$=(0,s.up)("q-page-container"),q=(0,s.up)("q-btn"),M=(0,s.up)("BasePostEntry"),T=(0,s.up)("TheSearchMenu"),P=(0,s.up)("q-page-sticky"),I=(0,s.up)("q-tooltip"),O=(0,s.up)("q-icon"),z=(0,s.up)("q-fab"),W=(0,s.up)("q-layout"),R=(0,s.Q2)("touch-pan");return(0,s.wg)(),(0,s.j4)(W,null,{default:(0,s.w5)((()=>[e.updatingFont?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("link",{key:0,id:"font-link",rel:"stylesheet",href:`https://fonts.googleapis.com/css2?family=${e.googleFontsName}&display-swap`},null,8,i)),(0,s._)("link",{id:"emoji-font-link",rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display-swap"},null,8,a),(0,s._)("div",null,[this.$store.state.keys.pub||this.$store.state.walletModal?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(E,{key:0,modelValue:e.initializeKeys,"onUpdate:modelValue":t[2]||(t[2]=t=>e.initializeKeys=t),seemless:"",persistent:"","onClick:backdrop":t[3]||(t[3]=t=>e.lookingAround=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{style:{"max-height":"85vh"},onLookAround:t[0]||(t[0]=t=>e.lookingAround=!0),onWalletDialog:t[1]||(t[1]=t=>e.lookingAround=!1)})])),_:1},8,["modelValue"]))]),(0,s._)("div",l,[(0,s._)("div",r,[(0,s.Wm)(C,{"item-mode":e.$q.screen.width<1023,"show-compact-mode-items":e.$q.screen.width<700,posting:e.postEntryOpen,onTogglePostEntry:e.togglePostEntry,onScrollToRect:e.scrollToRect,onSetUser:t[4]||(t[4]=t=>(e.lookingAround=!1,this.$store.state.walletModal=!1))},null,8,["item-mode","show-compact-mode-items","posting","onTogglePostEntry","onScrollToRect"])]),(0,s._)("div",c,[(0,s.Wm)($,{ref:"pageContainer"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,null,{default:(0,s.w5)((({Component:t})=>[((0,s.wg)(),(0,s.j4)(s.Ob,{include:e.cachedPages},[((0,s.wg)(),(0,s.j4)((0,s.LL)(t),{key:e.$route.path,"looking-around":e.lookingAround,onScrollToRect:e.scrollToRect,onReplyEvent:e.setReplyEvent,onUpdateFont:e.updateFont},null,40,["looking-around","onScrollToRect","onReplyEvent","onUpdateFont"]))],1032,["include"]))])),_:1})])),_:1},512),e.$q.screen.width>=600&&e.postEntryOpen?((0,s.wg)(),(0,s.iD)("div",d,[(0,s.Wm)(q,{icon:"close",flat:"",dense:"",onClick:e.togglePostEntry,class:"self-end",style:{position:"absolute",top:"0",right:"0","z-index":"1"}},null,8,["onClick"]),(0,s.Wm)(M,{event:e.replyEvent,onClearEvent:t[5]||(t[5]=t=>e.replyEvent=null),onSent:e.togglePostEntry,class:"q-px-md q-pt-sm"},null,8,["event","onSent"])])):(0,s.kq)("",!0),u]),(0,s._)("div",p,[(0,s.Wm)(T)])]),e.$q.screen.width<600?((0,s.wg)(),(0,s.j4)(P,{key:1,onClick:(0,o.iM)(e.resizePostEntryPlaceholder,["stop"]),id:"bottom-drawer",position:"bottom",class:"z-top xs lt-sm"},{default:(0,s.w5)((()=>[e.messageMode?((0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)(M,{event:e.replyEvent,"message-mode":e.messageMode,onClearEvent:t[6]||(t[6]=t=>e.replyEvent=null),onSent:t[7]||(t[7]=t=>e.replyEvent=null),onResized:e.resizePostEntryPlaceholder,"auto-focus":!1},null,8,["event","message-mode","onResized"])])):(0,s.kq)("",!0),e.messageMode?((0,s.wg)(),(0,s.iD)("div",m)):(0,s.kq)("",!0),e.postEntryOpen?((0,s.wg)(),(0,s.iD)("div",y,[(0,s.Wm)(M,{onSent:e.togglePostEntry,onResized:e.resizePostEntryPlaceholder,"auto-focus":!1},null,8,["onSent","onResized"])])):(0,s.kq)("",!0),(0,s.Wm)(C,{id:"bottom-menu","compact-mode":!0,posting:e.postEntryOpen,onTogglePostEntry:e.togglePostEntry,onScrollToRect:e.scrollToRect,onSetUser:t[8]||(t[8]=t=>e.lookingAround=!1)},null,8,["posting","onTogglePostEntry","onScrollToRect"])])),_:1},8,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(P,{style:{"margin-top":"20px"},position:"top-right",offset:e.fabPos,id:"navagation-buttons"},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(z,{direction:"left",color:"accent",class:"no-margin no-padding z-top","model-value":!0,persistent:"",flat:"",padding:"xs",disable:e.draggingFab},{tooltip:(0,s.w5)((()=>[(0,s.Wm)(I,{class:"tooltip",anchor:"center left",self:"center right",offset:[10,10]},{default:(0,s.w5)((()=>[g])),_:1})])),icon:(0,s.w5)((()=>[(0,s.Wm)(O,{name:"drag_indicator"})])),"active-icon":(0,s.w5)((()=>[(0,s.Wm)(O,{name:"drag_indicator"})])),default:(0,s.w5)((()=>[(0,s.Wm)(q,{onClick:(0,o.iM)(e.forward,["stop"]),color:"primary",unelevated:"",round:"",outline:"",icon:"keyboard_arrow_right",disable:e.draggingFab},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{class:"tooltip",anchor:"center left",self:"center right",offset:[10,10]},{default:(0,s.w5)((()=>[f])),_:1})])),_:1},8,["onClick","disable"]),(0,s.Wm)(q,{onClick:(0,o.iM)(e.scrollToTop,["stop"]),color:"primary",unelevated:"",round:"",outline:"",icon:"keyboard_double_arrow_up",disable:e.draggingFab||"inbox"===e.$route.name||"messages"===e.$route.name},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{class:"tooltip",anchor:"center left",self:"center right",offset:[10,10]},{default:(0,s.w5)((()=>[w])),_:1})])),_:1},8,["onClick","disable"]),(0,s.Wm)(q,{onClick:(0,o.iM)(e.back,["stop"]),color:"primary",unelevated:"",round:"",outline:"",icon:"keyboard_arrow_left",disable:e.draggingFab},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{class:"tooltip",anchor:"center left",self:"center right",offset:[10,10]},{default:(0,s.w5)((()=>[b])),_:1})])),_:1},8,["onClick","disable"])])),_:1},8,["disable"])),[[R,e.moveFab,void 0,{prevent:!0,mouse:!0}]])])),_:1},8,["offset"])])),_:1})}n(46727);var v=n(43701),x=n(19302),_=n(86970);const E={key:1,style:{"min-height":"1rem"}},C={key:2,avatar:"",class:"q-mx-auto no-padding relative-position"},S={key:2,style:{"min-height":"1rem"}};function $(e,t,n,o,i,a){const l=(0,s.up)("BaseUserCard"),r=(0,s.up)("BaseUserAvatar"),c=(0,s.up)("q-item"),d=(0,s.up)("q-item-section"),u=(0,s.up)("q-icon"),p=(0,s.up)("q-badge"),h=(0,s.up)("BaseButtonPost"),m=(0,s.up)("BaseButtonSetUser"),y=(0,s.up)("q-list");return(0,s.wg)(),(0,s.j4)(y,{class:(0,_.C_)(e.compactMode?"flex row no-wrap justify-around items-center full-width":"text-right"),dense:e.compactMode},{default:(0,s.w5)((()=>[e.$store.state.keys.pub?((0,s.wg)(),(0,s.j4)(c,{key:0,class:(0,_.C_)(["col no-padding flex items-center",e.compactMode?"justify-center":"justify-end"]),clickable:"",onClick:t[0]||(t[0]=t=>e.toProfile(e.$store.state.keys.pub))},{default:(0,s.w5)((()=>[e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(l,{key:0,pubkey:e.$store.state.keys.pub,"align-right":!0,wrap:!0,class:"gt-sm"},null,8,["pubkey"])),e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:1,pubkey:e.$store.state.keys.pub,"align-right":!0,"show-verified":!0,size:"lg",class:"q-mr-sm lt-md"},null,8,["pubkey"])),e.$store.state.keys.pub&&e.compactMode?((0,s.wg)(),(0,s.j4)(r,{key:2,pubkey:e.$store.state.keys.pub,"align-right":!0,size:"1.5rem"},null,8,["pubkey"])):(0,s.kq)("",!0)])),_:1},8,["class"])):(0,s.kq)("",!0),e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",E)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.filteredUserMenuItems,(t=>((0,s.wg)(),(0,s.j4)(c,{clickable:"",class:(0,_.C_)(["menu-item",(e.$route.name===t.title||e.$route.path.split("/")[1]===t.title?"menu-item-active text-accent ":"")+(e.compactMode?"no-margin no-padding col":"self-end q-px-none")]),dense:e.compactMode,style:(0,_.j5)(e.compactMode?"":"min-height: 2.75rem;"),active:e.$route.name===t.title||e.$route.path.split("/")[1]===t.title,"active-class":"",onClick:n=>e.handleClick(n,t),key:t.title},{default:(0,s.w5)((()=>[e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(d,{key:0,class:"gt-sm text-uppercase",style:{"font-size":"1rem"}},{default:(0,s.w5)((()=>[(0,s._)("div",null,(0,_.zw)(e.$t(t.title)),1)])),_:2},1024)),t.icon&&!e.compactMode?((0,s.wg)(),(0,s.j4)(d,{key:1,avatar:"",class:"relative-position no-padding",style:{"min-width":"2.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{outline:"",name:t.icon},null,8,["name"]),"notifications"===t.title&&e.$store.state.unreadNotifications?((0,s.wg)(),(0,s.j4)(p,{key:0,color:"secondary",floating:"",class:"q-mr-md text-bold sf-mono",outline:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,_.zw)(e.$store.state.unreadNotifications),1)])),_:1})):(0,s.kq)("",!0),"messages"===t.title&&e.$store.getters.unreadChats?((0,s.wg)(),(0,s.j4)(p,{key:1,color:"secondary",floating:"",class:"q-mr-md text-bold sf-mono",outline:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,_.zw)(e.$store.getters.unreadChats),1)])),_:1})):(0,s.kq)("",!0)])),_:2},1024)):(0,s.kq)("",!0),t.icon&&e.compactMode?((0,s.wg)(),(0,s.iD)("div",C,[(0,s.Wm)(u,{name:t.icon,size:"sm"},null,8,["name"]),t.badge&&e.$store.getters[t.badge]?((0,s.wg)(),(0,s.j4)(p,{key:0,color:"secondary",floating:"",rounded:"",class:"sf-mono",style:{"margin-top":"0.2rem","margin-left":"0.1rem"}})):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])),_:2},1032,["dense","style","active","onClick","class"])))),128)),e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",S)),(0,s._)("div",{color:"primary",class:(0,_.C_)(["flex",e.compactMode?"col justify-center":"q-my-md justify-end"])},[e.$store.state.keys.pub?((0,s.wg)(),(0,s.j4)(h,{key:0,"is-open":e.posting,verbose:!0,onOpen:t[1]||(t[1]=t=>e.$emit("toggle-post-entry")),outline:!e.compactMode,flat:e.compactMode,color:"primary",size:e.compactMode?"sm":"lg",class:(0,_.C_)(e.compactMode?"":"q-px-sm")},null,8,["is-open","outline","flat","size","class"])):(0,s.kq)("",!0),e.$store.state.keys.pub?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(m,{key:1,onClick:t[2]||(t[2]=t=>e.handleClick(t,{title:"set-user"})),verbose:!0,outline:!e.compactMode,flat:e.compactMode,color:"primary",size:e.compactMode?"sm":"lg",class:(0,_.C_)(e.compactMode?"":"q-px-sm")},null,8,["outline","flat","size","class"]))],2)])),_:1},8,["class","dense"])}var q=n(18933),M=n(47399);const T={key:0,class:"gt-sm spotnik",style:{"font-size":"1rem","font-weight":"700","letter-spacing":"0.05rem"}},P={key:0},I={key:1};function O(e,t,n,o,i,a){const l=(0,s.up)("q-icon"),r=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)(r,{unelevated:"",clickable:"",size:e.buttonSize,class:"button-post",dense:"",onClick:t[0]||(t[0]=t=>e.$emit("open"))},{default:(0,s.w5)((()=>[e.verbose?((0,s.wg)(),(0,s.iD)("div",T,[e.isOpen?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",P," "+(0,_.zw)(e.$t("post"))+" ",1)),e.isOpen?((0,s.wg)(),(0,s.iD)("span",I," "+(0,_.zw)(e.$t("close"))+" ",1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),(0,s.Wm)(l,{name:e.isOpen?"close":"chat_bubble_outline",class:(0,_.C_)(e.verbose?"":"flip-horizontal"),color:e.isOpen?"":"primary",size:e.buttonSize},null,8,["name","class","color","size"])])),_:1},8,["size"])}const z=(0,s.aZ)({name:"BaseButtonPost",emits:["open"],props:{isOpen:{type:Boolean,required:!0},buttonSize:{type:String,required:!1,default:"sm"},verbose:{type:Boolean,default:!1}}});var W=n(11639),R=n(24455),U=n(22857),D=n(69984),K=n.n(D);const j=(0,W.Z)(z,[["render",O]]),N=j;K()(z,"components",{QBtn:R.Z,QIcon:U.Z});const L={key:0,class:"gt-sm",style:{"font-size":"1rem","font-weight":"700","letter-spacing":"0.05rem"}};function V(e,t,n,o,i,a){const l=(0,s.up)("q-icon"),r=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)(r,{unelevated:"",clickable:"",size:e.buttonSize,class:"button-set-user",dense:"",style:{"margin-left":"-10px"}},{default:(0,s.w5)((()=>[e.verbose?((0,s.wg)(),(0,s.iD)("div",L,[(0,s._)("span",null," "+(0,_.zw)(e.$t("Login"))+" ",1)])):(0,s.kq)("",!0),(0,s.Wm)(l,{name:"login",color:"primary",size:e.buttonSize},null,8,["size"])])),_:1},8,["size"])}const Z=(0,s.aZ)({name:"BaseButtonSetUser",props:{buttonSize:{type:String,required:!1,default:"sm"},verbose:{type:Boolean,default:!1}}}),B=(0,W.Z)(Z,[["render",V]]),A=B;K()(Z,"components",{QBtn:R.Z,QIcon:U.Z});const F=(0,s.aZ)({name:"TheUserMenu",mixins:[q.Z],emits:["toggle-post-entry","scroll-to-rect","set-user"],props:{iconMode:{type:Boolean,default:!1},compactMode:{type:Boolean,default:!1},showCompactModeItems:{type:Boolean,default:!1},posting:{type:Boolean,required:!0}},data(){return{userMenuItems:[{title:"feed",icon:"newspaper",to:"/",match:"feed"},{title:"notifications",badge:"unreadNotifications",icon:"notifications",to:"/notifications",match:"notifications"},{title:"messages",badge:"unreadChats",icon:"mail_lock",to:"/messages/inbox",match:"messages"},{title:"settings",icon:"settings",to:"/settings",match:"settings"},{title:"follow",icon:"search",to:"/follow",match:"follow",compactMenuOnly:!0}]}},components:{BaseUserCard:M.Z,BaseButtonPost:N,BaseButtonSetUser:A},computed:{filteredUserMenuItems(){return this.$store.state.keys.pub?this.compactMode||this.showCompactModeItems?this.userMenuItems:this.userMenuItems.filter((e=>!e.compactMenuOnly)):this.userMenuItems.filter((e=>"feed"===e.title))}},methods:{handleClick(e,t){if("set-user"===t.title)return this.$emit("scroll-to-rect",{top:0}),void this.$emit("set-user");"feed"===t.title&&"feed"===this.$route.name?(e.preventDefault(),this.$emit("scroll-to-rect",{top:0})):this.$router.push(t.to)}}});var Q=n(13246),H=n(490),Y=n(50926),G=n(76749),X=n(20990),J=n(87743),ee=n(44458),te=n(62146);const ne=(0,W.Z)(F,[["render",$],["__scopeId","data-v-613c54e0"]]),se=ne;K()(F,"components",{QList:Q.Z,QItem:H.Z,QSeparator:Y.Z,QItemSection:G.Z,QIcon:U.Z,QBadge:X.Z,QDialog:J.Z,QCard:ee.Z,QBtn:R.Z}),K()(F,"directives",{ClosePopup:te.Z});var oe=n(67981),ie=n(81484),ae=n.n(ie),le=n(36489),re=n.n(le);const ce=e=>((0,s.dD)("data-v-dfd7b1ae"),e=e(),(0,s.Cn)(),e),de=ce((()=>(0,s._)("div",{style:{width:"30%",display:"flex",margin:"0 auto"}},[(0,s._)("img",{src:"mascot_round.png",alt:"mascot_round",class:"image-fit"})],-1))),ue=ce((()=>(0,s._)("h2",{style:{"text-align":"center","justify-content":"center","margin-bottom":"-30px","font-size":"16px"},class:"text-h4 spotnik"}," Welcome to ",-1))),pe=ce((()=>(0,s._)("h1",{style:{"text-align":"center","justify-content":"center","margin-bottom":"-5px","font-size":"50px"},class:"text-h4 spotnik"}," Dostr ",-1))),he=ce((()=>(0,s._)("h2",{style:{"text-align":"center","justify-content":"center","font-size":"16px"},class:"text-h6 spotnik"}," Ethereum-flavoured Nostr ",-1))),me={class:"text-bold flex justify-between",style:{margin:"0 auto"}},ye=ce((()=>(0,s._)("span",{class:"lt-md",style:{"font-size":"14px",margin:"-4px 0 0 8px",color:"yellow"}}," Learn about Dostr ",-1))),ge=ce((()=>(0,s._)("span",{class:"gt-sm",style:{"font-size":"14px",margin:"-4px 0 0 10px",color:"yellow"}}," Click here to learn about Nostr ",-1))),fe=ce((()=>(0,s._)("div",{style:{"margin-top":"5px"}},[(0,s._)("span",{style:{padding:"0.2rem 0 0 0.2rem","font-size":"10pt","font-family":"'SF Mono'","letter-spacing":"-0.5px"}},[(0,s.Uk)(" ℹ️ This same information can be found in the "),(0,s._)("strong",null,"FAQ"),(0,s.Uk)(" section at the bottom of the "),(0,s._)("strong",null,"Settings"),(0,s.Uk)(" page after Login ")])],-1))),we=ce((()=>(0,s._)("hr",{style:{"margin-bottom":"25px"}},null,-1))),be={key:0,style:{display:"flex",margin:"0","justify-content":"center"},class:"q-mb-md"},ke=ce((()=>(0,s._)("span",null," ",-1))),ve=ce((()=>(0,s._)("img",{src:"ethereum.svg"},null,-1))),xe={key:1,style:{display:"flex",margin:"20px","justify-content":"center"},class:"q-mb-md"},_e=(0,s.Uk)("  Connect Nostr Extension  "),Ee={key:2,style:{position:"relative"}},Ce={style:{display:"flex",margin:"0 auto","justify-content":"center"}},Se=ce((()=>(0,s._)("img",{src:ae()},null,-1))),$e=ce((()=>(0,s._)("img",{src:ae()},null,-1))),qe=ce((()=>(0,s._)("img",{src:ae()},null,-1))),Me={style:{display:"flex",margin:"0 auto","justify-content":"center"}},Te=ce((()=>(0,s._)("img",{src:re()},null,-1))),Pe={key:0,style:{display:"flex",margin:"20px","justify-content":"center"},class:"q-mb-md"},Ie=(0,s.Uk)("  Connect Nostr Extension  "),Oe={key:3,style:{display:"flex",margin:"0","justify-content":"center"},class:"q-mb-md"},ze=ce((()=>(0,s._)("img",{src:ae()},null,-1))),We={key:4,style:{display:"flex",margin:"0","justify-content":"center"},class:"q-mb-md"},Re=ce((()=>(0,s._)("img",{src:re()},null,-1))),Ue={key:5,style:{position:"relative"}},De={class:"input-siwe",style:{margin:"10px auto"}},Ke=ce((()=>(0,s._)("b",{style:{color:"orange"}},"PASSWORD",-1))),je=(0,s.Uk)(" IS OPTIONAL ALTHOUGH WE RECOMMEND USING A VALUE. IT IS USED TO 'SALT' NOSTR-SPECIFIC KEY GENERATION "),Ne={class:"input-siwe",style:{margin:"-20px auto"}},Le=ce((()=>(0,s._)("b",{style:{color:"orange"}},"USERNAME",-1))),Ve=(0,s.Uk)(),Ze=ce((()=>(0,s._)("b",null,"MUST",-1))),Be=(0,s.Uk)(" BE YOUR NIP-02 OR NIP-05 IDENTIFIER (HINT: lowercase 'user' or 'user@domain.wtf'). IT IS USED TO GENERATE UNIQUE KEYS FOR YOUR USERNAME "),Ae={key:6,style:{display:"block"}},Fe={key:0,style:{display:"flex",margin:"30px auto","justify-content":"center"}},Qe={class:"spotnik",style:{"font-size":"16px",color:"yellow","font-weight":"700"}},He=(0,s.Uk)(" VERIFYING RECORDS  "),Ye={key:1,style:{display:"flex",margin:"30px auto","justify-content":"center"}},Ge=ce((()=>(0,s._)("p",{class:"spotnik"},[(0,s.Uk)(" ↓ GENERATED "),(0,s._)("span",{style:{color:"orange","font-weight":"700"}},"PRIVATE KEY"),(0,s.Uk)(" ↓ ")],-1))),Xe=[Ge],Je={style:{display:"block",margin:"-30px auto","justify-content":"center"}},et={key:2,style:{display:"flex",margin:"40px","justify-content":"center"},class:"q-mb-md"},tt=ce((()=>(0,s._)("img",{src:"ethereum.svg"},null,-1))),nt=ce((()=>(0,s._)("span",null," ",-1))),st={key:7,style:{display:"flex",margin:"30px auto","justify-content":"center"}},ot=ce((()=>(0,s._)("p",{class:"spotnik"},[(0,s.Uk)(" ↓ IMPORTED "),(0,s._)("span",{style:{color:"yellowgreen","font-weight":"700"}},"PUBLIC KEY"),(0,s.Uk)(" ↓ ")],-1))),it=[ot],at={style:{display:"block",margin:"-30px auto 50px","justify-content":"center"}},lt={key:8,style:{"margin-top":"40px","margin-left":"47%",width:"100%"}},rt=ce((()=>(0,s._)("h2",{class:"text-subtitle1 q-pr-md"},"OR",-1))),ct=[rt],dt={key:9,style:{"margin-top":"100px",width:"100%"}},ut=ce((()=>(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-md flex justify-between gt-sm",style:{margin:"0 auto"}}," 🔐  Enter your custom Nostr key ",-1))),pt=ce((()=>(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-md flex justify-between lt-md",style:{margin:"0 auto","font-size":"15px"}}," 🔐  Enter your Nostr key ",-1))),ht={key:0,class:"sf-mono-tight",style:{"font-size":"13px",color:"white"}},mt=ce((()=>(0,s._)("b",{style:{color:"lightgreen"}}," INFO: ",-1))),yt=(0,s.Uk)(" Entering your "),gt=ce((()=>(0,s._)("b",{style:{color:"lightgreen"}},"Public Key",-1))),ft=(0,s.Uk)(" means you will need to "),wt=ce((()=>(0,s._)("b",{style:{color:"orange"}},"Sign",-1))),bt=(0,s.Uk)(" with your "),kt=ce((()=>(0,s._)("b",{style:{color:"orange"}},"Private Key",-1))),vt=(0,s.Uk)(" each time you post content either manually or with a browser extension. This method is secure but inconvenient. "),xt={key:1,class:"sf-mono-tight",style:{"font-size":"13px",color:"white"}},_t=ce((()=>(0,s._)("span",{style:{"font-size":"12px","padding-bottom":"10px"}},"⚠️ ",-1))),Et=ce((()=>(0,s._)("b",{style:{color:"orange"}},"WARNING:",-1))),Ct=(0,s.Uk)(" Entering your "),St=ce((()=>(0,s._)("b",{style:{color:"orange"}},"Private Key",-1))),$t=(0,s.Uk)(" to Login means Dostr will automatically "),qt=ce((()=>(0,s._)("b",{style:{color:"orange"}},"Sign",-1))),Mt=(0,s.Uk)(" with your "),Tt=ce((()=>(0,s._)("b",{style:{color:"orange"}},"Private Key",-1))),Pt=(0,s.Uk)(" each time you post content. This method is convenient although relatively insecure. "),It=[_t,Et,Ct,St,$t,qt,Mt,Tt,Pt],Ot={class:"flex justify-center spotnik",style:{"margin-top":"10px"}},zt={key:0,style:{"font-size":"16px",color:"white"}},Wt={key:1,style:{"font-size":"16px",color:"white"}},Rt=ce((()=>(0,s._)("hr",{class:"ruler-mobile"},null,-1))),Ut={class:"flex justify-between"},Dt={key:0,class:"text-subtitle1 text-bold q-pr-md flex justify-between",style:{margin:"0 auto"}},Kt=(0,s.Uk)(" Generate Nostr Keys "),jt={key:11,style:{"margin-top":"-75px"}},Nt=ce((()=>(0,s._)("div",{class:"full-width flex row no-wrap justify-center"},[(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-sm gt-sm"}," 📡  Enter Bootstrap Relays (optional) "),(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-sm lt-md",style:{"font-size":"13px"}}," 📡  Enter Relays (optional) ")],-1))),Lt={class:"flex row justify-between no-wrap items-end q-mb-sm",style:{"margin-top":"20px"}},Vt={class:"flex row no-wrap items-center"},Zt=ce((()=>(0,s._)("span",{style:{"text-transform":"uppercase"}},[(0,s.Uk)("❗ The list of "),(0,s._)("span",{style:{color:"orange"}},"Selected Relays"),(0,s.Uk)(" shown below will be queried to load your user Profile, Follows, and Relay data from Nostr Network."),(0,s._)("br"),(0,s.Uk)(" ❗ Please ensure that the "),(0,s._)("span",{style:{color:"orange"}},"Selected Relays"),(0,s.Uk)(" includes relays that you publish your Nostr data to. Otherwise, Dostr may not be able to find your data. ")],-1))),Bt=ce((()=>(0,s._)("span",{class:"q-ml-sm text-bold gt-sm"},"Selected relays",-1))),At=ce((()=>(0,s._)("span",{class:"q-ml-xs text-bold lt-md"},"Relays",-1))),Ft={class:"flex items-end",id:"new-relay-input"},Qt={style:{display:"flex",margin:"10px 5px -7px 0px","justify-content":"center"}},Ht={class:"relay-list",style:{border:"1px solid var(--q-primary)"}},Yt=(0,s.Uk)("                "),Gt=["onClick"],Xt=(0,s.Uk)("\n                  "),Jt={class:"flex row justify-between no-wrap"},en=(0,s.Uk)("\n                    "),tn={style:{overflow:"auto"}},nn=(0,s.Uk)("\n                    "),sn=(0,s.Uk)("\n                  "),on=(0,s.Uk)("\n                "),an=(0,s.Uk)("\n              "),ln={style:{"max-height":"6.75rem"}},rn={class:"relay-list"},cn=(0,s.Uk)("                  "),dn=["onClick"],un=(0,s.Uk)("\n                    "),pn={class:"flex row justify-between no-wrap"},hn=(0,s.Uk)("\n                      "),mn={style:{overflow:"auto"}},yn=(0,s.Uk)("\n                      "),gn=(0,s.Uk)("\n                    "),fn=(0,s.Uk)("\n                  "),wn=(0,s.Uk)("\n                "),bn=ce((()=>(0,s._)("div",{class:"pad-mobile"},null,-1)));function kn(e,t,n,i,a,l){const r=(0,s.up)("q-btn"),c=(0,s.up)("q-icon"),d=(0,s.up)("BaseInformation"),u=(0,s.up)("q-expansion-item"),p=(0,s.up)("q-avatar"),h=(0,s.up)("q-tooltip"),m=(0,s.up)("q-input"),y=(0,s.up)("q-btn-group"),g=(0,s.up)("q-card-section"),f=(0,s.up)("q-form"),w=(0,s.up)("BaseSelectMultiple"),b=(0,s.up)("q-card");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(b,{class:"relative-position full-width",style:{"overflow-x":"hidden"}},{default:(0,s.w5)((()=>[de,(0,s.Wm)(r,{icon:"close",size:"md",flat:"",round:"",class:"absolute-top-right z-top",onClick:t[0]||(t[0]=t=>e.$emit("look-around"))}),ue,pe,he,(0,s.Wm)(u,{"expand-icon":"expand_more","expanded-icon":"expand_less",class:"intro full-width items-center q-mb-md","header-class":"items-center"},{header:(0,s.w5)((()=>[(0,s._)("span",me,[(0,s.Wm)(c,{name:"info",style:{"margin-top":"-1.25px"}}),ye,ge])])),default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(d)]),fe])),_:1}),we,e.isConnectedMetamask||this.$store.state.walletConnect?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",be,[(0,s.Wm)(r,{size:"md",onClick:e.showWeb3modal,outline:"",color:"blue-2","font-weight":"900",disable:e.walletsList,label:e.isConnectedMetamask&&this.$store.state.walletConnect?"":" Connect with Ethereum"},{default:(0,s.w5)((()=>[ke,(0,s.Wm)(p,{size:"20px"},{default:(0,s.w5)((()=>[ve])),_:1})])),_:1},8,["onClick","disable","label"])])),e.hasExtension&&!e.walletsList?((0,s.wg)(),(0,s.iD)("div",xe,[(0,s.Wm)(r,{size:"md",outline:"",color:"yellow-3","font-weight":"900",disable:!e.hasExtension,onClick:e.getFromExtension},{default:(0,s.w5)((()=>[_e])),_:1},8,["disable","onClick"])])):(0,s.kq)("",!0),!e.walletsList||this.$store.state.walletConnect||e.isConnectedMetamask?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ee,[(0,s._)("div",Ce,[this.isMobileDevice()?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,size:"md",onClick:e.siwe,style:{background:"black","margin-top":"15px",border:"0px solid white",width:"auto"},"text-color":"orange","font-weight":"700",label:" Metamask "},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"25px"},{default:(0,s.w5)((()=>[Se])),_:1})])),_:1},8,["onClick"])),this.isMobileDevice()&&!this.isMetamask()?((0,s.wg)(),(0,s.j4)(r,{key:1,size:"md",onClick:e.redirect,style:{background:"black","margin-top":"15px",border:"0px solid white",width:"auto"},"text-color":"white","font-weight":"700",label:" Metamask "},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"25px"},{default:(0,s.w5)((()=>[$e])),_:1})])),_:1},8,["onClick"])):(0,s.kq)("",!0),this.isMobileDevice()&&this.isMetamask()?((0,s.wg)(),(0,s.j4)(r,{key:2,size:"md",onClick:e.siwe,style:{background:"black","margin-top":"15px",border:"0px solid white",width:"auto"},"text-color":"yellow-8","font-weight":"700",label:" Connect "},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"25px"},{default:(0,s.w5)((()=>[qe])),_:1})])),_:1},8,["onClick"])):(0,s.kq)("",!0)]),(0,s._)("div",Me,[(0,s.Wm)(r,{size:"md",onClick:e.web3modal,style:{background:"black","margin-top":"15px",border:"0px solid white",width:"auto"},"text-color":"blue","font-weight":"700",label:" Wallet Connect "},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"25px"},{default:(0,s.w5)((()=>[Te])),_:1})])),_:1},8,["onClick"])]),e.hasExtension&&e.walletsList?((0,s.wg)(),(0,s.iD)("div",Pe,[(0,s.Wm)(r,{size:"md",outline:"",color:"yellow-3","font-weight":"900",disable:!e.hasExtension,onClick:e.getFromExtension},{default:(0,s.w5)((()=>[Ie])),_:1},8,["disable","onClick"])])):(0,s.kq)("",!0)])),e.isConnectedMetamask?((0,s.wg)(),(0,s.iD)("div",Oe,[(0,s.Wm)(r,{size:"md",onClick:e.disconnectMetamask,style:{background:"black",border:"0px solid white"},"text-color":"red","font-weight":"900",label:e.isConnectedMetamask?" Disconnect ":""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"25px"},{default:(0,s.w5)((()=>[ze])),_:1})])),_:1},8,["onClick","label"])])):(0,s.kq)("",!0),this.$store.state.walletConnect?((0,s.wg)(),(0,s.iD)("div",We,[(0,s.Wm)(r,{size:"md",onClick:e.disconnectWalletConnect,style:{background:"black",border:"0px solid white"},"text-color":"red","font-weight":"900",label:this.$store.state.walletConnect?" Disconnect ":""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"25px"},{default:(0,s.w5)((()=>[Re])),_:1})])),_:1},8,["onClick","label"])])):(0,s.kq)("",!0),e.isConnectedMetamask||this.$store.state.walletConnect?((0,s.wg)(),(0,s.iD)("div",Ue,[(0,s._)("div",De,[(0,s.Wm)(m,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),ref:"keyInput","bottom-slots":"",type:"password",outlined:"",label:"enter password (optional)",dense:"",class:"q-field__bottom"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:"info",style:{"font-size":"20px","margin-top":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"tooltip",anchor:"top left",self:"bottom right",style:{width:"auto"},offset:[1,1]},{default:(0,s.w5)((()=>[Ke,je])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,s._)("div",Ne,[(0,s.Wm)(m,{modelValue:e.username,"onUpdate:modelValue":t[2]||(t[2]=t=>e.username=t),ref:"keyInput","bottom-slots":"",outlined:"",label:"NIP-02/05 username",dense:"",class:"q-field__bottom",rules:[t=>e.isLegitUser(t)||"empty or illegal username"]},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:"info",style:{"font-size":"20px","margin-top":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"tooltip",anchor:"top left",self:"bottom right",style:{width:"auto"},offset:[1,1]},{default:(0,s.w5)((()=>[Le,Ve,Ze,Be])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])])])):(0,s.kq)("",!0),e.isConnectedMetamask||this.$store.state.walletConnect?((0,s.wg)(),(0,s.iD)("div",Ae,[e.isLoading?((0,s.wg)(),(0,s.iD)("div",Fe,[(0,s._)("p",Qe,[He,(0,s.Wm)(c,{name:"hourglass_top",size:"sm",style:{"margin-top":"-2px"}})])])):(0,s.kq)("",!0),e.isSigned&&!e.isExtension?((0,s.wg)(),(0,s.iD)("div",Ye,Xe)):(0,s.kq)("",!0),(0,s._)("div",Je,[e.isSigned&&!e.isExtension?((0,s.wg)(),(0,s.j4)(m,{key:0,modelValue:e.key,"onUpdate:modelValue":t[3]||(t[3]=t=>e.key=t),ref:"keyInput","bottom-slots":"",outlined:"",disabled:!e.isSigned,label:"auto-generated from ethereum signature",style:{width:"inherit"},dense:""},{append:(0,s.w5)((()=>[(0,s.Wm)(r,{type:"submit",unelevated:"",size:"sm",color:e.isKeyValid?"positive":"negative","font-weight":e.isKeyValid?"normal":"bold","text-color":(e.isKeyValid,"white"),label:e.isKeyValid?"PROCEED":"ENTER KEY","icon-right":e.isKeyValid?"login":"close",onClick:e.proceed,disabled:!e.isKeyValid,style:{"font-size":"12px","font-weight":"900"}},null,8,["color","font-weight","text-color","label","icon-right","onClick","disabled"])])),_:1},8,["modelValue","disabled"])):(0,s.kq)("",!0)]),!e.isSigned&&e.username.length>0?((0,s.wg)(),(0,s.iD)("div",et,[(0,s.Wm)(r,{size:"md",onClick:e.sign,outline:"",color:"blue-3","font-weight":"900",label:e.isConnectedMetamask||this.$store.state.walletConnect?" Sign-In With Ethereum":"",value:"true"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{size:"20px"},{default:(0,s.w5)((()=>[tt])),_:1}),nt])),_:1},8,["onClick","label"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),e.isExtension&&!e.isSigned?((0,s.wg)(),(0,s.iD)("div",st,it)):(0,s.kq)("",!0),(0,s._)("div",at,[e.isExtension&&!e.isSigned?((0,s.wg)(),(0,s.j4)(m,{key:0,modelValue:e.key,"onUpdate:modelValue":t[4]||(t[4]=t=>e.key=t),ref:"keyInput","bottom-slots":"",outlined:"",disabled:!e.isExtension,label:"imported from nostr extension",style:{width:"inherit"},dense:""},{append:(0,s.w5)((()=>[(0,s.Wm)(r,{type:"submit",unelevated:"",size:"sm",color:e.isKeyValid?"positive":"negative","font-weight":e.isKeyValid?"normal":"bold","text-color":(e.isKeyValid,"white"),label:e.isKeyValid?"PROCEED":"ENTER KEY","icon-right":e.isKeyValid?"login":"close",onClick:e.proceed,disabled:!e.isKeyValid,style:{"font-size":"12px","font-weight":"900"}},null,8,["color","font-weight","text-color","label","icon-right","onClick","disabled"])])),_:1},8,["modelValue","disabled"])):(0,s.kq)("",!0)]),this.$store.state.chainId||e.isExtension?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",lt,ct)),this.$store.state.chainId?((0,s.wg)(),(0,s.iD)("div",dt)):(0,s.kq)("",!0),this.$store.state.chainId||e.isExtension?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(u,{key:10,"expand-icon":"expand_more","expanded-icon":"expand_less",class:"no-padding items-center q-mb-md","header-class":"items-center"},{header:(0,s.w5)((()=>[ut,pt])),default:(0,s.w5)((()=>[(0,s.Wm)(f,{onSubmit:e.proceed},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"key-entry no-padding"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{spread:"",unelevated:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{size:"md",color:"primary",label:"public key",outline:!e.watchOnly,"text-color":e.watchOnly?"dark":"",value:"true",onClick:t[5]||(t[5]=t=>e.watchOnly=!0),disable:e.isBech32Sec},null,8,["outline","text-color","disable"]),(0,s.Wm)(r,{size:"md",color:"primary",label:"private key",outline:e.watchOnly,"text-color":e.watchOnly?"":"dark",value:"false",onClick:t[6]||(t[6]=t=>e.watchOnly=!1),disable:e.isBech32Pub},null,8,["outline","text-color","disable"])])),_:1}),(0,s.Wm)(m,{modelValue:e.key,"onUpdate:modelValue":t[7]||(t[7]=t=>e.key=t),ref:"keyInput","bottom-slots":"",outlined:"",label:e.watchOnly?"enter public key":"enter private key",style:{width:"inherit"}},{hint:(0,s.w5)((()=>[!e.key&&e.watchOnly?((0,s.wg)(),(0,s.iD)("p",ht,[(0,s.Wm)(c,{name:"info",style:{"font-size":"16px","margin-top":"-2px"}}),mt,yt,gt,ft,wt,bt,kt,vt])):(0,s.kq)("",!0),e.key||e.watchOnly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",xt,It)),(0,s._)("div",Ot,[e.key&&!e.isKeyValid?((0,s.wg)(),(0,s.iD)("p",zt," INVALID KEY ❌ ")):(0,s.kq)("",!0),e.isKeyValid?((0,s.wg)(),(0,s.iD)("p",Wt," VALID KEY ✅ ")):(0,s.kq)("",!0)])])),append:(0,s.w5)((()=>[(0,s.Wm)(r,{type:"submit",unelevated:"",size:"sm",color:e.isKeyValid?"positive":"negative","font-weight":e.isKeyValid?"normal":"bold","text-color":(e.isKeyValid,"white"),label:e.isKeyValid?"PROCEED":"ENTER KEY","icon-right":e.isKeyValid?"login":"close",onClick:e.proceed,disabled:!e.isKeyValid,style:{"font-size":"12px","font-weight":"900"}},null,8,["color","font-weight","text-color","label","icon-right","onClick","disabled"])])),_:1},8,["modelValue","label"]),Rt,(0,s._)("div",Ut,[e.isKeyValid?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("h2",Dt," 🔑 Do not have a key? "))]),(0,s.Wm)(y,{style:{"margin-top":"20px"},spread:"",unelevated:""},{default:(0,s.w5)((()=>[e.isKeyValid?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,size:"md",color:"primary",outline:"",onClick:e.generate},{default:(0,s.w5)((()=>[Kt])),_:1},8,["onClick"]))])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})),e.isKeyValid&&this.$store.state.chainId?((0,s.wg)(),(0,s.iD)("div",jt)):(0,s.kq)("",!0),e.isKeyValid?((0,s.wg)(),(0,s.j4)(u,{key:12,class:"q-mt-sm",dense:"","dense-toggle":"","default-opened":"",id:"bootstrap-relays",style:{"margin-top":"-50px"}},{header:(0,s.w5)((()=>[Nt])),default:(0,s.w5)((()=>[(0,s._)("div",Lt,[(0,s._)("div",Vt,[(0,s.Wm)(c,{name:"info",style:{"font-size":"20px","margin-top":"0px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"tooltip",anchor:"top right",self:"bottom middle",offset:[10,10]},{default:(0,s.w5)((()=>[Zt])),_:1})])),_:1}),Bt,At]),(0,s._)("div",Ft,[(0,s._)("div",Qt,[(0,s.Wm)(m,{modelValue:e.addRelay,"onUpdate:modelValue":t[8]||(t[8]=t=>e.addRelay=t),color:"lightgreen",ref:"keyInput",dense:"",outlined:"","bottom-slots":"",placeholder:"add new relay",style:{"padding-top":"0px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{icon:"add",color:"positive",size:"sm",flat:"",dense:"",onClick:(0,o.iM)(e.addNewRelay,["stop"])},null,8,["onClick"])])),_:1},8,["modelValue"])])])]),(0,s.Wm)(w,null,{selected:(0,s.w5)((()=>[(0,s._)("pre",Ht,[Yt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Object.keys(e.selectedRelays),((t,n)=>((0,s.wg)(),(0,s.iD)("li",{key:n+"-"+t,class:"relay-item",onClick:(0,o.iM)((n=>delete e.selectedRelays[t]),["stop"])},[Xt,(0,s._)("div",Jt,[en,(0,s._)("span",tn,(0,_.zw)(t),1),nn,(0,s.Wm)(c,{name:"remove",size:"xs",color:"negative"}),sn]),on],8,Gt)))),128)),an])])),options:(0,s.w5)((()=>[(0,s._)("div",ln,[(0,s._)("pre",rn,[cn,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.optionalRelays,((t,n)=>((0,s.wg)(),(0,s.iD)("li",{key:n+"-"+t,class:"relay-item",onClick:(0,o.iM)((n=>e.selectedRelays[t]={read:!0,write:!1}),["stop"])},[un,(0,s._)("div",pn,[hn,(0,s._)("span",mn,(0,_.zw)(t),1),yn,(0,s.Wm)(c,{name:"add",size:"xs",color:"positive",flat:""}),gn]),fn],8,dn)))),128)),wn])])])),_:1})])),_:1})):(0,s.kq)("",!0),bn])),_:1})])}var vn=n(36836),xn=n(13187),_n=n(94912),En=n(18403);const Cn=async(e,t,n)=>{if(!window.ethereum)return{data:"",status:"❌ Wallet Not Connected"};{const o=new xn.Q(window.ethereum),i=o.getSigner();try{const s=await window.ethereum.request({method:"eth_accounts"});let o=_n.getAddress(s[0]),a=`eip155:${n}:${o}`,l=`Log into Nostr client as '${e}'\n\nIMPORTANT: Please verify the integrity and authenticity of connected Nostr client before signing this message\n\nSIGNED BY: ${a}`,r=await i.signMessage(l),c=await En.nip111.signInWithX(e,a,r,t);return{data:c,status:"🦊 Successfully Generated Schnorr Keys"}}catch(s){return console.log("❌ Failed to Sign: "+s.message),{data:"",status:"❌ Failed to Sign: "+s.message.toLowerCase()}}}},Sn=async(e,t,n)=>{if(!window.ethereum)return{data:"",status:"❌ Wallet Not Connected"};{const o=new xn.Q(window.ethereum),i=o.getSigner();try{const s=await window.ethereum.request({method:"eth_accounts"});let o=_n.getAddress(s[0]),a=`eip155:${n}:${o}`,l=`Log into Nostr client as '${e}'\n\nIMPORTANT: Please verify the integrity and authenticity of connected Nostr client before signing this message\n\nSIGNED BY: ${a}`,r=await i.signMessage(l),c=await En.nip111.signInWithXStandalone(e,a,r,t);return{data:c,status:"🦊 Successfully Generated Schnorr Keys"}}catch(s){return console.log("❌ Failed to Sign: "+s.message),{data:"",status:"❌ Failed to Sign: "+s.message.toLowerCase()}}}},$n=async()=>{if(!window.ethereum)return{chainId:"",address:"",status:"🦊 You must install MetaMask browser extension & connect using 'Connect Wallet' button"};try{const e=await window.ethereum.request({method:"eth_requestAccounts"}),t={chainId:window.ethereum.networkVersion,status:"🦊 Connected",address:e[0]};return t}catch(e){return console.log("❌ Failed to initialise: "+e.message),{chainId:"",address:"",status:"❌ Failed to initialise: "+e.message.toLowerCase()}}};var qn=n(70431),Mn=n(2644),Tn=n(66807),Pn=n(34207);const In="58107e13d36d52fd554cd1ece3258891",On=[Mn.yX,Mn.pL,Mn.RJ,Mn.yu,Mn.ws],{provider:zn}=(0,qn.QB)(On,[(0,Tn.X)({projectId:In})]),Wn=(0,qn.eI)({autoConnect:!0,connectors:(0,Tn.gu)({chains:On,version:1,projectId:In}),provider:zn}),Rn=new Tn.J0(Wn,On),Un=new Pn.E({projectId:In,themeMode:"dark",themeColor:"blue",themeBackground:"gradient",container:"#w3m-container",customClasses:{container:"my-modal-top"},themeVariables:{"--w3m-font-family":"Spotnik","--w3m-letter-spacing":"-0.5px","--w3m-font-weight":"700","--w3m-font-size":"10px"}},Rn);var Dn=n(38114),Kn=n(26687);const jn=JSON.parse('{"Xh":"https://dostr-eth.github.io/dostr-client"}');var Nn=n(65054);const Ln=(0,s.aZ)({name:"TheKeyInitializationDialog",mixins:[q.Z],emits:["look-around","wallet-dialog"],components:{BaseSelectMultiple:Dn.Z,BaseInformation:Kn.Z},setup(){return{focusKeyInput(){this.$refs.keyInput.focus()}}},data(){return{watchOnly:!1,key:null,hasExtension:!1,selectedRelays:this.$store.state.defaultRelays,newRelay:"",isConnectedMetamask:!1,username:"",password:"",isSigned:!1,isSignedStandalone:!1,walletsList:!1,isLoading:!1,isExtension:!1}},computed:{icon(){return document.getElementById("icon").href},showKeyInitialization(){return!this.$store.state.walletModal},isKeyKey(){return!!this.isKey(this.hexKey)},isKeyValid(){return!!this.isKeyKey||!!vn.Ev.validateWords(this.key?.toLowerCase())},isUsernameValid(){return!0},isPasswordValid(){return!0},isKeyInvalid(){return!this.isKeyValid},hexKey(){return this.isBech32Key(this.key)?this.bech32ToHex(this.key):this.key?.toLowerCase()},isBech32Pub(){return!!this.isBech32Key(this.key)&&this.key.toLowerCase().startsWith("npub")},isBech32Sec(){return!!this.isBech32Key(this.key)&&this.key.toLowerCase().startsWith("nsec")},optionalRelays(){let e=this.$store.state.optionalRelaysList.filter((e=>!(this.newRelay.length&&!e.toLowerCase().includes(this.newRelay.toLowerCase()))&&!this.selectedRelays[e]));return e}},async created(){this.$store.state.keys.pub||setTimeout((()=>{window.nostr&&(this.hasExtension=!0)}),1e3)},methods:{openExternalLink(e){window.open(e,"_blank").focus()},isLegitUser(e){return!(0===e.length||e.length>100)&&(e.includes("@")?2===e.split("@").length&&(!!e.split("@")[1].includes(".")&&(!(!e.split("@")[0].match(/^[a-z0-9-_]+$/)||!e.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))&&(this.$store.state.username=e,!0))):!!e.match(/^[a-z0-9-_]+$/)&&(this.$store.state.username=e,!0))},isMobileDevice(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getFromExtension(){try{this.key=await window.nostr.getPublicKey(),this.isExtension=!0,this.isSigned=!1,this.watchOnly=!0,this.focusKeyInput()}catch(e){this.$q.notify({message:"⚠️ Failed to get a public key from a Nostr extension",color:"warning",classes:"notify"})}},redirect(){this.$emit("look-around");let e="https://metamask.app.link/dapp/"+jn.Xh.toString().split("://").pop()+"/";window.open(e).focus()},isMetamask(){return!!window.ethereum},async siwe(){this.walletsList=!1;let e=await $n();e.address?(console.log(`Connected to ${e.address}`),this.isConnectedMetamask=!0,this.$store.state.walletConnect=!1,this.$store.state.chainId=e.chainId):(this.isConnectedMetamask=!1,this.$store.state.walletConnect=!1,console.log("Connection Failed"))},disconnectMetamask(){this.isConnectedMetamask=!1,this.$store.state.walletConnect=!1,this.$store.state.walletModal=!1,this.walletsList=!1},disconnectWalletConnect(){this.isConnectedMetamask=!1,this.$store.state.walletConnect=!1,this.$store.state.walletModal=!1,this.walletsList=!1},async sign(){this.username.includes("@")&&(this.isLoading=!0);let e=await Cn(this.username,this.password,this.$store.state.chainId);this.username.includes("@")&&(this.isLoading=!1),this.key=e.data.privkey,this.watchOnly=!1,this.key&&this.key?.length>0?this.isSigned=!0:this.username.includes("@")?e.status.includes("user rejected signing")?this.$q.notify({message:"⚠️ Signature request rejected by user",color:"negative",classes:"notify"}):this.$q.notify({message:`⚠️ NIP-05 '${this.username}' doesn't exist or Public Key doesn't match the records. IMPORTANT: If you are trying to Login with \n                your NIP-05 for the first time, you'll need to register it first by generating your new Public Key in standalone mode and uploading it\n                to your NIP-05 provider. Click on 'REGISTER' to generate your Public Key. If you wish to use ENS as your NIP-05 provider, Click on 'LEARN TO USE ENS'`,color:"warning",classes:"notify",timeout:0,actions:[{label:"Register",color:"yellow",handler:()=>{this.signStandalone()}},{label:"Learn to use ENS",color:"blue-2",handler:()=>{this.openExternalLink("/dostr-client/readme/readme.htm?src=https://gist.githubusercontent.com/sshmatrix/ad172b4f0daa5f03560eef94f11f73c3/raw/dbc8a73c537d42383c3cd173f7db4d7c1ac4421c/NIP-05_ENS.md")}}]}):e.status.includes("user rejected signing")?this.$q.notify({message:"⚠️ Signature request rejected by user",color:"negative",classes:"notify"}):this.$q.notify({message:e.status,color:"warning",classes:"notify",timeout:0})},async signStandalone(){let e=await Sn(this.username,this.password,this.$store.state.chainId),t=e.data.pubkey;this.watchOnly=!1,t&&t?.length>0?(this.isSignedStandalone=!0,this.$q.notify({message:`ℹ️ Your Public Key associated with ${this.username} is: ${this.isMobileDevice()?t.slice(0,10)+"..."+t.slice(-10):t}. Please copy and upload this key to your NIP-05 provider to use Sign-In With Ethereum`,color:"positive",classes:"notify",timeout:0,closeBtn:!1,actions:[{label:"Copy Public Key",color:"white",handler:()=>{this.copyCode(t)}},{label:"Close",color:"black",handler:()=>{this.username=""}}]})):this.$q.notify({message:`⚠️ Failed to generate Public Key for NIP-05 '${this.username}'`,color:"warning",classes:"notify"})},generate(){this.key=(0,vn.wQ)(),this.watchOnly=!1},showWeb3modal(){this.walletsList=!0,this.isExtension=!1},copyCode(e){let t=e;(0,Nn.Z)(t).then((()=>{this.username=""})).catch((()=>{this.username=""}))},async web3modal(){this.$store.state.walletModal=!0,this.watchOnly=!1,await Un.openModal();while(1){if(Rn.getAccount().isConnected)break;await new Promise((e=>setTimeout(e,1e3)))}Rn.getAccount().isConnected?(this.$emit("wallet-dialog"),console.log("Connected with WalletConnect"),this.$store.state.walletConnect=!0,this.isConnectedMetamask=!1,this.$store.state.chainId=Rn.getNetwork().chain.id.toString(),this.$store.state.walletModal=!1,this.walletsList=!1):(this.isConnectedMetamask=!1,this.$store.state.walletConnect=!1,console.log("Connection Failed"))},proceed(){let e=this.hexKey;var t={};this.isKey(e)?this.watchOnly?t.pub=e:t.priv=e:console.warn("Proceed called with invalid key",e),this.$store.commit("setDefaultRelays",this.selectedRelays),this.$store.dispatch("initKeys",t),this.$store.dispatch("launch"),this.initializeKeys=!1,this.$router.push({name:"settings",params:{initUser:!0}})},addNewRelay(){this.newRelay&&this.newRelay.length&&(this.selectedRelays[this.newRelay]={read:!0,write:!1}),this.newRelay="",this.focusKeyInput()}}});var Vn=n(61123),Zn=n(61357),Bn=n(66611),An=n(18149),Fn=n(46858),Qn=n(8326),Hn=n(63190),Yn=n(67236);const Gn=(0,W.Z)(Ln,[["render",kn],["__scopeId","data-v-dfd7b1ae"]]),Xn=Gn;K()(Ln,"components",{QDialog:J.Z,QCard:ee.Z,QBtn:R.Z,QExpansionItem:Vn.Z,QIcon:U.Z,QAvatar:Zn.Z,QInput:Bn.Z,QField:An.Z,QTooltip:Fn.Z,QForm:Qn.Z,QCardSection:Hn.Z,QBtnGroup:Yn.Z});var Jn=n(57674),es=n(34136);const{getVerticalScrollPosition:ts,setVerticalScrollPosition:ns}=v.ZP,ss=(0,s.aZ)({name:"MainLayout",components:{TheUserMenu:se,TheSearchMenu:oe.Z,TheKeyInitializationDialog:Xn},setup(){const e=(0,x.Z)();return e},data(){return{cachedPages:["Feed","Notifications","DevTools","Settings","Inbox"],middlePagePos:{},fabPos:[0,10],draggingFab:!1,broadcastChannel:new BroadcastChannel("astral"),activeWindow:!1,timeout:null,hasLaunched:!1,postEntryOpen:!1,replyEvent:null,googleFontsName:"Open Sans",updatingFont:!0,lookingAround:!1,walletConnect:this.$store.state.walletModal}},computed:{scrollingContainer(){return this.$q.screen.width<600?window:this.$refs.pageContainer?.$el},messageMode(){return"messages"===this.$route.name?this.replyEvent?"reply":"message":null},initializeKeys(){return!this.lookingAround}},created(){this.loadPreferences()},mounted(){this.launch(),this.enableWebLn(),document.querySelector("#left-drawer").addEventListener("wheel",this.redirectScroll,{passive:!0}),this.$router.beforeEach(((e,t)=>{this.preserveScrollPos(e,t),"messages"===e.name&&this.postEntryOpen&&(this.postEntryOpen=!1)})),this.$router.afterEach(((e,t)=>{e.path!==t.path&&this.restoreScrollPos(e,t)}));let e=this.$refs.pageContainer?.$el.getBoundingClientRect();e&&(this.fabPos[0]=e.right-e.width),this.updatingFont=!1,this.resizePostEntryPlaceholder()},beforeUnmount(){document.querySelector("#left-drawer").removeEventListener("wheel",this.redirectScroll)},methods:{redirectScroll(e){let t=ts(this.scrollingContainer);ns(this.scrollingContainer,t+e.deltaY)},preserveScrollPos(e,t){this.cachedPages.map((e=>e.toLowerCase())).includes(t.name)&&(this.middlePagePos[t.fullPath]=ts(this.scrollingContainer))},restoreScrollPos(e,t){this.middlePagePos[e.fullPath]?ns(this.scrollingContainer,this.middlePagePos[e.fullPath],500):this.scrollToTop()},scrollToTop(){ns(this.scrollingContainer,0,500)},back(){this.$router.go(-1)},forward(){this.$router.go(1)},moveFab(e){this.draggingFab=!0!==e.isFirst&&!0!==e.isFinal,this.fabPos=[this.fabPos[0]-e.delta.x,this.fabPos[1]+e.delta.y]},scrollToRect(e){let t=Math.max(e.top,0);ns(this.scrollingContainer,t,500)},async launch(){this.timeout=null,this.$store.state.keys.pub?this.$store.dispatch("launch"):this.$store.dispatch("launchWithoutKey"),this.hasLaunched=!0},togglePostEntry(){this.postEntryOpen=!this.postEntryOpen},setReplyEvent(e){this.replyEvent=e},resizePostEntryPlaceholder(){setTimeout((()=>{document.querySelector("#bottom-drawer-placeholder").style.minHeight=`${document.querySelector("#bottom-drawer")?.clientHeight||0}px`}),1e3)},updateFont(e){this.updatingFont=!0,(0,Jn.Z)("font",e),this.googleFontsName=e.replace(" ","+"),this.updatingFont=!1},lightOrDark(e){var t,n,s,o;return e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),t=e[1],n=e[2],s=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),t=e>>16,n=e>>8&255,s=255&e),o=Math.sqrt(t*t*.299+n*n*.587+s*s*.114),o>127.5?"light":"dark"},loadPreferences(){let{primary:e,secondary:t,accent:n,background:s}=this.$store.state.config.preferences.color;(0,Jn.Z)("primary",e),(0,Jn.Z)("secondary",t),(0,Jn.Z)("accent",n),(0,Jn.Z)("background",s),this.$q.dark.set("dark"===this.lightOrDark(s)),this.updateFont(this.$store.state.config.preferences.font)},async enableWebLn(){try{"undefined"!==typeof window.webln&&await window.webln.enable()}catch(e){console.log(e)}},async getRelayStat(){let e=await(0,es.Y8)();console.log("relayStatus",e)}}});var os=n(77605),is=n(12133),as=n(30627),ls=n(88830),rs=n(2873);const cs=(0,W.Z)(ss,[["render",k]]),ds=cs;K()(ss,"components",{QLayout:os.Z,QDialog:J.Z,QPageContainer:is.Z,QSeparator:Y.Z,QBtn:R.Z,QPageSticky:as.Z,QFab:ls.Z,QTooltip:Fn.Z,QIcon:U.Z}),K()(ss,"directives",{TouchPan:rs.Z})},81484:(e,t,n)=>{e.exports=n.p+"img/metamask.8113df95.png"},36489:(e,t,n)=>{e.exports=n.p+"img/walletConnect.67463905.png"},88677:()=>{},62808:()=>{},69159:()=>{}}]);