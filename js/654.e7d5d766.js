"use strict";(globalThis["webpackChunkdostr"]=globalThis["webpackChunkdostr"]||[]).push([[654],{2558:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ht});var s=o(59835),n=o(61957);const i=["href"],l=["href"],a={id:"layout-container",ripple:!1,class:"backdrop"},r={id:"left-drawer",class:"flex justify-end"},c={id:"middle-page"},d={key:0,id:"post-entry",unelevated:"",class:"gt-xs flex column align-self relative-position"},u=(0,s._)("div",{id:"bottom-drawer-placeholder"},null,-1),p={id:"right-drawer",class:"flex justify-start"},m={key:0,id:"bottom-message-entry",unelevated:"",class:"flex column align-self relative-position q-px-md"},y={key:1,id:"bottom-post-entry-top-border"},g={key:2,id:"bottom-post-entry",unelevated:"",class:"flex column align-self relative-position q-px-md"},h=(0,s.Uk)("CLICK TO COLLAPSE/EXPAND OR DRAG TO MOVE"),f=(0,s.Uk)("FORWARD"),w=(0,s.Uk)("'SCROLL TO TOP"),k=(0,s.Uk)("BACK");function b(e,t,o,b,v,x){const _=(0,s.up)("TheKeyInitializationDialog"),q=(0,s.up)("q-dialog"),C=(0,s.up)("TheUserMenu"),z=(0,s.up)("router-view"),E=(0,s.up)("q-page-container"),P=(0,s.up)("q-btn"),$=(0,s.up)("BasePostEntry"),M=(0,s.up)("TheSearchMenu"),S=(0,s.up)("q-page-sticky"),W=(0,s.up)("q-tooltip"),Z=(0,s.up)("q-icon"),R=(0,s.up)("q-fab"),U=(0,s.up)("q-layout"),K=(0,s.Q2)("touch-pan");return(0,s.wg)(),(0,s.j4)(U,null,{default:(0,s.w5)((()=>[e.updatingFont?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("link",{key:0,id:"font-link",rel:"stylesheet",href:`https://fonts.googleapis.com/css2?family=${e.googleFontsName}&display-swap`},null,8,i)),(0,s._)("link",{id:"emoji-font-link",rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display-swap"},null,8,l),e.$store.state.keys.pub?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(q,{key:1,modelValue:e.initializeKeys,"onUpdate:modelValue":t[0]||(t[0]=t=>e.initializeKeys=t),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{style:{"max-height":"85vh"},onLookAround:e.setLookingAroundMode},null,8,["onLookAround"])])),_:1},8,["modelValue"])),(0,s._)("div",a,[(0,s._)("div",r,[(0,s.Wm)(C,{"item-mode":e.$q.screen.width<1023,"show-compact-mode-items":e.$q.screen.width<700,posting:e.postEntryOpen,onTogglePostEntry:e.togglePostEntry,onScrollToRect:e.scrollToRect,onSetUser:t[1]||(t[1]=t=>e.lookingAround=!1)},null,8,["item-mode","show-compact-mode-items","posting","onTogglePostEntry","onScrollToRect"])]),(0,s._)("div",c,[(0,s.Wm)(E,{ref:"pageContainer"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,null,{default:(0,s.w5)((({Component:t})=>[((0,s.wg)(),(0,s.j4)(s.Ob,{include:e.cachedPages},[((0,s.wg)(),(0,s.j4)((0,s.LL)(t),{key:e.$route.path,"looking-around":e.lookingAround,onScrollToRect:e.scrollToRect,onReplyEvent:e.setReplyEvent,onUpdateFont:e.updateFont},null,40,["looking-around","onScrollToRect","onReplyEvent","onUpdateFont"]))],1032,["include"]))])),_:1})])),_:1},512),e.$q.screen.width>=600&&e.postEntryOpen?((0,s.wg)(),(0,s.iD)("div",d,[(0,s.Wm)(P,{icon:"close",flat:"",dense:"",onClick:e.togglePostEntry,class:"self-end",style:{position:"absolute",top:"0",right:"0","z-index":"1"}},null,8,["onClick"]),(0,s.Wm)($,{event:e.replyEvent,onClearEvent:t[2]||(t[2]=t=>e.replyEvent=null),onSent:e.togglePostEntry,class:"q-px-md q-pt-sm"},null,8,["event","onSent"])])):(0,s.kq)("",!0),u]),(0,s._)("div",p,[(0,s.Wm)(M)])]),e.$q.screen.width<600?((0,s.wg)(),(0,s.j4)(S,{key:2,onClick:(0,n.iM)(e.resizePostEntryPlaceholder,["stop"]),id:"bottom-drawer",position:"bottom",class:"z-top xs lt-sm"},{default:(0,s.w5)((()=>[e.messageMode?((0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)($,{event:e.replyEvent,"message-mode":e.messageMode,onClearEvent:t[3]||(t[3]=t=>e.replyEvent=null),onSent:t[4]||(t[4]=t=>e.replyEvent=null),onResized:e.resizePostEntryPlaceholder,"auto-focus":!1},null,8,["event","message-mode","onResized"])])):(0,s.kq)("",!0),e.messageMode?((0,s.wg)(),(0,s.iD)("div",y)):(0,s.kq)("",!0),e.postEntryOpen?((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)($,{onSent:e.togglePostEntry,onResized:e.resizePostEntryPlaceholder,"auto-focus":!1},null,8,["onSent","onResized"])])):(0,s.kq)("",!0),(0,s.Wm)(C,{id:"bottom-menu","compact-mode":!0,posting:e.postEntryOpen,onTogglePostEntry:e.togglePostEntry,onScrollToRect:e.scrollToRect,onSetUser:t[5]||(t[5]=t=>e.lookingAround=!1)},null,8,["posting","onTogglePostEntry","onScrollToRect"])])),_:1},8,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(S,{style:{"margin-top":"50px"},position:"top-right",offset:e.fabPos,id:"navagation-buttons"},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(R,{direction:"left",color:"accent",class:"no-margin no-padding z-top","model-value":!0,persistent:"",flat:"",padding:"xs",disable:e.draggingFab},{tooltip:(0,s.w5)((()=>[(0,s.Wm)(W,{style:{"font-size":"12px"}},{default:(0,s.w5)((()=>[h])),_:1})])),icon:(0,s.w5)((()=>[(0,s.Wm)(Z,{name:"drag_indicator"})])),"active-icon":(0,s.w5)((()=>[(0,s.Wm)(Z,{name:"drag_indicator"})])),default:(0,s.w5)((()=>[(0,s.Wm)(P,{onClick:(0,n.iM)(e.forward,["stop"]),color:"primary",unelevated:"",round:"",outline:"",icon:"keyboard_arrow_right",disable:e.draggingFab},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{style:{"font-size":"12px"}},{default:(0,s.w5)((()=>[f])),_:1})])),_:1},8,["onClick","disable"]),(0,s.Wm)(P,{onClick:(0,n.iM)(e.scrollToTop,["stop"]),color:"primary",unelevated:"",round:"",outline:"",icon:"keyboard_double_arrow_up",disable:e.draggingFab||"inbox"===e.$route.name||"messages"===e.$route.name},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{style:{"font-size":"12px"}},{default:(0,s.w5)((()=>[w])),_:1})])),_:1},8,["onClick","disable"]),(0,s.Wm)(P,{onClick:(0,n.iM)(e.back,["stop"]),color:"primary",unelevated:"",round:"",outline:"",icon:"keyboard_arrow_left",disable:e.draggingFab},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{style:{"font-size":"12px"}},{default:(0,s.w5)((()=>[k])),_:1})])),_:1},8,["onClick","disable"])])),_:1},8,["disable"])),[[K,e.moveFab,void 0,{prevent:!0,mouse:!0}]])])),_:1},8,["offset"])])),_:1})}o(46727);var v=o(43701),x=o(19302),_=o(86970);const q={key:1,style:{"min-height":"1rem"}},C={key:2,avatar:"",class:"q-mx-auto no-padding relative-position"},z={key:2,style:{"min-height":"1rem"}};function E(e,t,o,n,i,l){const a=(0,s.up)("BaseUserCard"),r=(0,s.up)("BaseUserAvatar"),c=(0,s.up)("q-item"),d=(0,s.up)("q-item-section"),u=(0,s.up)("q-icon"),p=(0,s.up)("q-badge"),m=(0,s.up)("BaseButtonPost"),y=(0,s.up)("BaseButtonSetUser"),g=(0,s.up)("q-list");return(0,s.wg)(),(0,s.j4)(g,{class:(0,_.C_)(e.compactMode?"flex row no-wrap justify-around items-center full-width":"text-right"),dense:e.compactMode},{default:(0,s.w5)((()=>[e.$store.state.keys.pub?((0,s.wg)(),(0,s.j4)(c,{key:0,class:(0,_.C_)(["col no-padding flex items-center",e.compactMode?"justify-center":"justify-end"]),clickable:"",onClick:t[0]||(t[0]=t=>e.toProfile(e.$store.state.keys.pub))},{default:(0,s.w5)((()=>[e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(a,{key:0,pubkey:e.$store.state.keys.pub,"align-right":!0,wrap:!0,class:"gt-sm"},null,8,["pubkey"])),e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:1,pubkey:e.$store.state.keys.pub,"align-right":!0,"show-verified":!0,size:"lg",class:"q-mr-sm lt-md"},null,8,["pubkey"])),e.$store.state.keys.pub&&e.compactMode?((0,s.wg)(),(0,s.j4)(r,{key:2,pubkey:e.$store.state.keys.pub,"align-right":!0,size:"1.5rem"},null,8,["pubkey"])):(0,s.kq)("",!0)])),_:1},8,["class"])):(0,s.kq)("",!0),e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",q)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.filteredUserMenuItems,(t=>((0,s.wg)(),(0,s.j4)(c,{clickable:"",class:(0,_.C_)(["menu-item",(e.$route.name===t.title||e.$route.path.split("/")[1]===t.title?"menu-item-active text-accent ":"")+(e.compactMode?"no-margin no-padding col":"self-end q-px-none")]),dense:e.compactMode,style:(0,_.j5)(e.compactMode?"":"min-height: 2.75rem;"),active:e.$route.name===t.title||e.$route.path.split("/")[1]===t.title,"active-class":"",onClick:o=>e.handleClick(o,t),key:t.title},{default:(0,s.w5)((()=>[e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(d,{key:0,class:"gt-sm text-uppercase",style:{"font-size":"1rem"}},{default:(0,s.w5)((()=>[(0,s._)("div",null,(0,_.zw)(e.$t(t.title)),1)])),_:2},1024)),t.icon&&!e.compactMode?((0,s.wg)(),(0,s.j4)(d,{key:1,avatar:"",class:"relative-position no-padding",style:{"min-width":"2.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{outline:"",name:t.icon},null,8,["name"]),"notifications"===t.title&&e.$store.state.unreadNotifications?((0,s.wg)(),(0,s.j4)(p,{key:0,color:"secondary",floating:"",class:"q-mr-md text-bold",outline:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,_.zw)(e.$store.state.unreadNotifications),1)])),_:1})):(0,s.kq)("",!0),"messages"===t.title&&e.$store.getters.unreadChats?((0,s.wg)(),(0,s.j4)(p,{key:1,color:"secondary",floating:"",class:"q-mr-md text-bold",outline:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,_.zw)(e.$store.getters.unreadChats),1)])),_:1})):(0,s.kq)("",!0)])),_:2},1024)):(0,s.kq)("",!0),t.icon&&e.compactMode?((0,s.wg)(),(0,s.iD)("div",C,[(0,s.Wm)(u,{name:t.icon,size:"sm"},null,8,["name"]),t.badge&&e.$store.getters[t.badge]?((0,s.wg)(),(0,s.j4)(p,{key:0,color:"secondary",floating:"",rounded:"",style:{"margin-top":"0.2rem","margin-left":"0.1rem"}})):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])),_:2},1032,["dense","style","active","onClick","class"])))),128)),e.compactMode?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",z)),(0,s._)("div",{color:"primary",class:(0,_.C_)(["flex",e.compactMode?"col justify-center":"q-my-md justify-end"])},[e.$store.state.keys.pub?((0,s.wg)(),(0,s.j4)(m,{key:0,"is-open":e.posting,verbose:!0,onOpen:t[1]||(t[1]=t=>e.$emit("toggle-post-entry")),outline:!e.compactMode,flat:e.compactMode,color:"primary",size:e.compactMode?"sm":"lg",class:(0,_.C_)(e.compactMode?"":"q-px-sm")},null,8,["is-open","outline","flat","size","class"])):(0,s.kq)("",!0),e.$store.state.keys.pub?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(y,{key:1,onClick:t[2]||(t[2]=t=>e.handleClick(t,{title:"set-user"})),verbose:!0,outline:!e.compactMode,flat:e.compactMode,color:"primary",size:e.compactMode?"sm":"lg",class:(0,_.C_)(e.compactMode?"":"q-px-sm")},null,8,["outline","flat","size","class"]))],2)])),_:1},8,["class","dense"])}var P=o(18933),$=o(60901);const M={key:0,class:"gt-sm spotnik",style:{"font-size":"1rem","font-weight":"700","letter-spacing":"0.05rem"}},S={key:0},W={key:1};function Z(e,t,o,n,i,l){const a=(0,s.up)("q-icon"),r=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)(r,{unelevated:"",clickable:"",size:e.buttonSize,class:"button-post",dense:"",onClick:t[0]||(t[0]=t=>e.$emit("open"))},{default:(0,s.w5)((()=>[e.verbose?((0,s.wg)(),(0,s.iD)("div",M,[e.isOpen?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",S," "+(0,_.zw)(e.$t("post"))+" ",1)),e.isOpen?((0,s.wg)(),(0,s.iD)("span",W," "+(0,_.zw)(e.$t("close"))+" ",1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),(0,s.Wm)(a,{name:e.isOpen?"close":"chat_bubble_outline",class:(0,_.C_)(e.verbose?"":"flip-horizontal"),color:e.isOpen?"":"primary",size:e.buttonSize},null,8,["name","class","color","size"])])),_:1},8,["size"])}const R=(0,s.aZ)({name:"BaseButtonPost",emits:["open"],props:{isOpen:{type:Boolean,required:!0},buttonSize:{type:String,required:!1,default:"sm"},verbose:{type:Boolean,default:!1}}});var U=o(11639),K=o(24455),j=o(22857),B=o(69984),O=o.n(B);const D=(0,U.Z)(R,[["render",Z]]),T=D;O()(R,"components",{QBtn:K.Z,QIcon:j.Z});const I={key:0,class:"gt-sm",style:{"font-size":"1rem","font-weight":"700","letter-spacing":"0.05rem"}};function Q(e,t,o,n,i,l){const a=(0,s.up)("q-icon"),r=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)(r,{unelevated:"",clickable:"",size:e.buttonSize,class:"button-set-user",dense:"",style:{"margin-left":"-10px"}},{default:(0,s.w5)((()=>[e.verbose?((0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("span",null," "+(0,_.zw)(e.$t("Login"))+" ",1)])):(0,s.kq)("",!0),(0,s.Wm)(a,{name:"login",color:"primary",size:e.buttonSize},null,8,["size"])])),_:1},8,["size"])}const F=(0,s.aZ)({name:"BaseButtonSetUser",props:{buttonSize:{type:String,required:!1,default:"sm"},verbose:{type:Boolean,default:!1}}}),L=(0,U.Z)(F,[["render",Q]]),V=L;O()(F,"components",{QBtn:K.Z,QIcon:j.Z});const N=(0,s.aZ)({name:"TheUserMenu",mixins:[P.Z],emits:["toggle-post-entry","scroll-to-rect","set-user"],props:{iconMode:{type:Boolean,default:!1},compactMode:{type:Boolean,default:!1},showCompactModeItems:{type:Boolean,default:!1},posting:{type:Boolean,required:!0}},data(){return{userMenuItems:[{title:"feed",icon:"newspaper",to:"/",match:"feed"},{title:"notifications",badge:"unreadNotifications",icon:"notifications",to:"/notifications",match:"notifications"},{title:"messages",badge:"unreadChats",icon:"mail_lock",to:"/messages/inbox",match:"messages"},{title:"settings",icon:"settings",to:"/settings",match:"settings"},{title:"follow",icon:"search",to:"/follow",match:"follow",compactMenuOnly:!0}]}},components:{BaseUserCard:$.Z,BaseButtonPost:T,BaseButtonSetUser:V},computed:{filteredUserMenuItems(){return this.$store.state.keys.pub?this.compactMode||this.showCompactModeItems?this.userMenuItems:this.userMenuItems.filter((e=>!e.compactMenuOnly)):this.userMenuItems.filter((e=>"feed"===e.title))}},methods:{handleClick(e,t){if("set-user"===t.title)return this.$emit("scroll-to-rect",{top:0}),void this.$emit("set-user");"feed"===t.title&&"feed"===this.$route.name?(e.preventDefault(),this.$emit("scroll-to-rect",{top:0})):this.$router.push(t.to)}}});var A=o(13246),Y=o(490),H=o(50926),G=o(76749),X=o(20990),J=o(87743),ee=o(44458),te=o(62146);const oe=(0,U.Z)(N,[["render",E],["__scopeId","data-v-4a613d6c"]]),se=oe;O()(N,"components",{QList:A.Z,QItem:Y.Z,QSeparator:H.Z,QItemSection:G.Z,QIcon:j.Z,QBadge:X.Z,QDialog:J.Z,QCard:ee.Z,QBtn:K.Z}),O()(N,"directives",{ClosePopup:te.Z});var ne=o(77935);const ie=e=>((0,s.dD)("data-v-c5a45a50"),e=e(),(0,s.Cn)(),e),le=ie((()=>(0,s._)("div",{style:{width:"30%",display:"flex",margin:"0 auto"}},[(0,s._)("img",{src:"mascot_round.png",alt:"mascot_round",class:"image-fit"})],-1))),ae=ie((()=>(0,s._)("h1",{style:{"text-align":"center","justify-content":"center","margin-bottom":"-10px"},class:"text-h4 spotnik"}," Welcome to Dostr ",-1))),re=ie((()=>(0,s._)("h2",{style:{"text-align":"center","justify-content":"center"},class:"text-h6 spotnik"}," Ethereum-flavoured Nostr ",-1))),ce={class:"text-bold flex justify-between",style:{margin:"0 auto"}},de=ie((()=>(0,s._)("span",{class:"lt-md",style:{"font-size":"14px",margin:"-3px 0 0 8px"}},"Learn about Dostr",-1))),ue=ie((()=>(0,s._)("span",{class:"gt-sm",style:{"font-size":"16px",margin:"-4px 0 0 10px"}},"Click here to learn about Dostr",-1))),pe=ie((()=>(0,s._)("div",{style:{"margin-top":"5px"}},[(0,s._)("span",{style:{padding:"0.2rem 0 0 0.2rem","font-size":"10pt","font-family":"'Rajdhani'"}},[(0,s.Uk)("ℹ️ This same information can be found in the "),(0,s._)("strong",null,"FAQ"),(0,s.Uk)(" section at the bottom of the "),(0,s._)("strong",null,"Settings"),(0,s.Uk)(" page after Login")])],-1))),me=ie((()=>(0,s._)("hr",{style:{"margin-bottom":"25px"}},null,-1))),ye={style:{display:"flex",margin:"0","justify-content":"center"},class:"q-mb-md"},ge=ie((()=>(0,s._)("div",{style:{width:"4%",display:"flex","margin-right":"5px"}},[(0,s._)("img",{src:"ethereum.svg",alt:"mascot_round",class:"image-fit"})],-1))),he=ie((()=>(0,s._)("div",{style:{width:"4%",display:"flex","margin-left":"5px"}},[(0,s._)("img",{src:"ethereum.svg",alt:"mascot_round",class:"image-fit"})],-1))),fe=ie((()=>(0,s._)("div",{style:{"margin-left":"47%",width:"100%"}},[(0,s._)("h2",{class:"text-subtitle1 q-pr-md"},"OR")],-1))),we=ie((()=>(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-md flex justify-between gt-sm",style:{margin:"0 auto"}}," 🔐  Enter your custom Nostr key ",-1))),ke=ie((()=>(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-md flex justify-between lt-md",style:{margin:"0 auto","font-size":"12px"}}," 🔐  Enter your Nostr key ",-1))),be={key:0,style:{"font-size":"12px"}},ve=(0,s.Uk)(" INFO: Entering "),xe=ie((()=>(0,s._)("b",{style:{color:"lightgreen"}},"Public Key",-1))),_e=(0,s.Uk)(" means you will need to "),qe=ie((()=>(0,s._)("b",{style:{color:"orange"}},"Sign",-1))),Ce=(0,s.Uk)(" with your "),ze=ie((()=>(0,s._)("b",{style:{color:"orange"}},"Private Key",-1))),Ee=(0,s.Uk)(" each time you post content either manually or using a browser extension "),Pe={key:1,style:{"font-size":"12px"}},$e=ie((()=>(0,s._)("span",{style:{"font-size":"14px"}},"⚠️",-1))),Me=(0,s.Uk)(" WARNING: Entering your "),Se=ie((()=>(0,s._)("b",{style:{color:"orange"}},"Private Key",-1))),We=(0,s.Uk)(" means Dostr will automatically "),Ze=ie((()=>(0,s._)("b",{style:{color:"orange"}},"Sign",-1))),Re=(0,s.Uk)(" with your "),Ue=ie((()=>(0,s._)("b",{style:{color:"orange"}},"Private Key",-1))),Ke=(0,s.Uk)(" each time you post content "),je=[$e,Me,Se,We,Ze,Re,Ue,Ke],Be={class:"flex justify-center spotnik",style:{"margin-top":"10px"}},Oe={key:0,style:{"font-size":"16px",color:"white"}},De={key:1,style:{"font-size":"16px",color:"white"}},Te=ie((()=>(0,s._)("hr",{style:{"margin-top":"50px","margin-bottom":"25px"}},null,-1))),Ie={class:"flex justify-between"},Qe={key:0,class:"text-subtitle1 text-bold q-pr-md flex justify-between",style:{margin:"0 auto"}},Fe=(0,s.Uk)(" Generate Keys "),Le=(0,s.Uk)(" Use Nostr Extension "),Ve=ie((()=>(0,s._)("div",{class:"full-width flex row no-wrap justify-center"},[(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-sm gt-sm"}," 📡  Enter Bootstrap Relays (optional) "),(0,s._)("h2",{class:"text-subtitle1 text-bold q-pr-sm lt-md",style:{"font-size":"12px"}}," 📡  Enter Bootstrap Relays (optional) ")],-1))),Ne={class:"flex row justify-between no-wrap items-end q-mb-sm",style:{"margin-top":"20px"}},Ae=ie((()=>(0,s._)("span",{class:"q-ml-sm text-bold gt-sm"},"↓ Selected relays",-1))),Ye=ie((()=>(0,s._)("span",{class:"q-ml-xs text-bold lt-md"},"↓ Relays",-1))),He=(0,s.Uk)(" ◦ The selected relays below will be queried to load your user profile, follows, and relay data from Nostr network."),Ge=ie((()=>(0,s._)("br",null,null,-1))),Xe=(0,s.Uk)(" ◦ Please ensure the list of selected relays includes relays you publish your Nostr data to, otherwise Dostr may not be able to find your data. "),Je={class:"flex items-end",id:"new-relay-input"},et={class:"relay-list",style:{border:"1px solid var(--q-primary)"}},tt=(0,s.Uk)("               "),ot=["onClick"],st=(0,s.Uk)("\n                 "),nt={class:"flex row justify-between no-wrap"},it=(0,s.Uk)("\n                   "),lt={style:{overflow:"auto"}},at=(0,s.Uk)("\n                   "),rt=(0,s.Uk)("\n                 "),ct=(0,s.Uk)("\n               "),dt=(0,s.Uk)("\n             "),ut={style:{"max-height":"6.75rem"}},pt={class:"relay-list"},mt=(0,s.Uk)("               "),yt=["onClick"],gt=(0,s.Uk)("\n                 "),ht={class:"flex row justify-between no-wrap"},ft=(0,s.Uk)("\n                   "),wt={style:{overflow:"auto"}},kt=(0,s.Uk)("\n                   "),bt=(0,s.Uk)("\n                 "),vt=(0,s.Uk)("\n               "),xt=(0,s.Uk)("\n             "),_t=ie((()=>(0,s._)("div",{style:{"min-height":"1rem"}},null,-1)));function qt(e,t,o,i,l,a){const r=(0,s.up)("q-btn"),c=(0,s.up)("q-icon"),d=(0,s.up)("BaseInformation"),u=(0,s.up)("q-expansion-item"),p=(0,s.up)("q-btn-group"),m=(0,s.up)("q-input"),y=(0,s.up)("q-card-section"),g=(0,s.up)("q-form"),h=(0,s.up)("q-tooltip"),f=(0,s.up)("BaseSelectMultiple"),w=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(w,{class:"relative-position full-width"},{default:(0,s.w5)((()=>[le,(0,s.Wm)(r,{icon:"close",size:"md",flat:"",round:"",class:"absolute-top-right z-top",onClick:t[0]||(t[0]=t=>e.$emit("look-around"))}),ae,re,(0,s.Wm)(u,{"expand-icon":"expand_more","expanded-icon":"expand_less",class:"intro full-width items-center q-mb-md","header-class":"items-center"},{header:(0,s.w5)((()=>[(0,s._)("span",ce,[(0,s.Wm)(c,{name:"info"}),de,ue])])),default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(d)]),pe])),_:1}),me,(0,s._)("div",ye,[ge,(0,s.Wm)(r,{size:"md",onClick:e.siwe,style:{background:"linear-gradient(",border:"0px solid white"},"text-color":"white","font-weight":"900",label:"Sign-In With Ethereum",value:"true"},null,8,["onClick"]),he]),fe,(0,s.Wm)(u,{"expand-icon":"expand_more","expanded-icon":"expand_less",class:"no-padding items-center q-mb-md","header-class":"items-center"},{header:(0,s.w5)((()=>[we,ke])),default:(0,s.w5)((()=>[(0,s.Wm)(g,{onSubmit:e.proceed},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"key-entry no-padding"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{spread:"",unelevated:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{size:"md",color:"primary",label:"public key",outline:!e.watchOnly,"text-color":e.watchOnly?"dark":"",value:"true",onClick:t[1]||(t[1]=t=>e.watchOnly=!0),disable:e.isBech32Sec},null,8,["outline","text-color","disable"]),(0,s.Wm)(r,{size:"md",color:"primary",label:"private key",outline:e.watchOnly,"text-color":e.watchOnly?"":"dark",value:"false",onClick:t[2]||(t[2]=t=>e.watchOnly=!1),disable:e.isBech32Pub},null,8,["outline","text-color","disable"])])),_:1}),(0,s.Wm)(m,{modelValue:e.key,"onUpdate:modelValue":t[3]||(t[3]=t=>e.key=t),ref:"keyInput","bottom-slots":"",outlined:"",label:e.watchOnly?"enter public key":"enter private key",style:{width:"inherit"},dense:""},{hint:(0,s.w5)((()=>[!e.key&&e.watchOnly?((0,s.wg)(),(0,s.iD)("p",be,[(0,s.Wm)(c,{name:"info",style:{"font-size":"16px","margin-top":"-2px"}}),ve,xe,_e,qe,Ce,ze,Ee])):(0,s.kq)("",!0),e.key||e.watchOnly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",Pe,je)),(0,s._)("div",Be,[e.key&&!e.isKeyValid?((0,s.wg)(),(0,s.iD)("p",Oe," INVALID KEY ❌ ")):(0,s.kq)("",!0),e.isKeyValid?((0,s.wg)(),(0,s.iD)("p",De," VALID KEY ✅ ")):(0,s.kq)("",!0)])])),append:(0,s.w5)((()=>[(0,s.Wm)(r,{type:"submit",unelevated:"",size:"sm",color:e.isKeyValid?"positive":"negative","font-weight":e.isKeyValid?"normal":"bold","text-color":(e.isKeyValid,"white"),label:e.isKeyValid?"PROCEED":"ENTER KEY","icon-right":e.isKeyValid?"login":"close",onClick:e.proceed,disabled:!e.isKeyValid,style:{"font-size":"12px","font-weight":"900"}},null,8,["color","font-weight","text-color","label","icon-right","onClick","disabled"])])),_:1},8,["modelValue","label"]),Te,(0,s._)("div",Ie,[e.isKeyValid?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("h2",Qe," 🔑 Do not have a key? "))]),(0,s.Wm)(p,{style:{"margin-top":"20px"},spread:"",unelevated:""},{default:(0,s.w5)((()=>[e.isKeyValid?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,size:"md",color:"primary",outline:"",onClick:e.generate},{default:(0,s.w5)((()=>[Fe])),_:1},8,["onClick"])),e.hasExtension&&!e.isKeyValid?((0,s.wg)(),(0,s.j4)(r,{key:1,size:"md",color:"primary",outline:"",onClick:e.getFromExtension},{default:(0,s.w5)((()=>[Le])),_:1},8,["onClick"])):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["onSubmit"]),e.isKeyValid?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"q-mt-sm",dense:"","dense-toggle":"","default-opened":"",id:"bootstrap-relays"},{header:(0,s.w5)((()=>[Ve])),default:(0,s.w5)((()=>[(0,s._)("div",Ne,[Ae,Ye,(0,s.Wm)(c,{class:"gt-sm",name:"info",style:{"font-size":"20px","margin-left":"-75px","margin-top":"-15px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{style:{"font-size":"13px"}},{default:(0,s.w5)((()=>[He,Ge,Xe])),_:1})])),_:1}),(0,s._)("div",Je,[(0,s.Wm)(m,{modelValue:e.addRelay,"onUpdate:modelValue":t[4]||(t[4]=t=>e.addRelay=t),color:"lightgreen",ref:"keyInput",dense:"","bottom-slots":"",placeholder:"add new relay",style:{"padding-top":"-10px"}},null,8,["modelValue"]),(0,s.Wm)(r,{icon:"add",color:"positive",size:"md",flat:"",dense:"",onClick:(0,n.iM)(e.addNewRelay,["stop"])},null,8,["onClick"])])]),(0,s.Wm)(f,null,{selected:(0,s.w5)((()=>[(0,s._)("pre",et,[tt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Object.keys(e.selectedRelays),((t,o)=>((0,s.wg)(),(0,s.iD)("li",{key:o+"-"+t,class:"relay-item",onClick:(0,n.iM)((o=>delete e.selectedRelays[t]),["stop"])},[st,(0,s._)("div",nt,[it,(0,s._)("span",lt,(0,_.zw)(t),1),at,(0,s.Wm)(c,{name:"remove",size:"xs",color:"negative"}),rt]),ct],8,ot)))),128)),dt])])),options:(0,s.w5)((()=>[(0,s._)("div",ut,[(0,s._)("pre",pt,[mt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.optionalRelays,((t,o)=>((0,s.wg)(),(0,s.iD)("li",{key:o+"-"+t,class:"relay-item",onClick:(0,n.iM)((o=>e.selectedRelays[t]={read:!0,write:!1}),["stop"])},[gt,(0,s._)("div",ht,[ft,(0,s._)("span",wt,(0,_.zw)(t),1),kt,(0,s.Wm)(c,{name:"add",size:"xs",color:"positive",flat:""}),bt]),vt],8,yt)))),128)),xt])])])),_:1})])),_:1})):(0,s.kq)("",!0),_t])),_:1})])),_:1})}var Ct=o(36836);const zt=async()=>{if(!window.ethereum)return{address:"",status:"🦊 You must install MetaMask browser extension & connect using 'Connect Wallet' button"};try{const e=await window.ethereum.request({method:"eth_requestAccounts"}),t={status:"👆🏽 Enter ENS & click 'NEXT'",address:e[0]};return t}catch(e){return console.log("❌ Failed to initialise: "+e.message),{address:"",status:"❌ Failed to initialise: "+e.message.toLowerCase()}}};var Et=o(42657),Pt=o(23113);const $t=(0,s.aZ)({name:"TheKeyInitializationDialog",mixins:[P.Z],emits:["look-around"],components:{BaseSelectMultiple:Et.Z,BaseInformation:Pt.Z},setup(){return{focusKeyInput(){this.$refs.keyInput.focus()}}},data(){return{watchOnly:!1,key:null,hasExtension:!1,selectedRelays:this.$store.state.defaultRelays,newRelay:""}},computed:{icon(){return document.getElementById("icon").href},isKeyKey(){return!!this.isKey(this.hexKey)},isKeyValid(){return!!this.isKeyKey||!!Ct.Ev.validateWords(this.key?.toLowerCase())},isKeyInvalid(){return!this.isKeyValid},hexKey(){return this.isBech32Key(this.key)?this.bech32ToHex(this.key):this.key?.toLowerCase()},isBech32Pub(){return!!this.isBech32Key(this.key)&&this.key.toLowerCase().startsWith("npub")},isBech32Sec(){return!!this.isBech32Key(this.key)&&this.key.toLowerCase().startsWith("nsec")},optionalRelays(){let e=this.$store.state.optionalRelaysList.filter((e=>!(this.newRelay.length&&!e.toLowerCase().includes(this.newRelay.toLowerCase()))&&!this.selectedRelays[e]));return e}},async created(){this.$store.state.keys.pub||setTimeout((()=>{window.nostr&&(this.hasExtension=!0)}),1e3)},methods:{async getFromExtension(){try{this.key=await window.nostr.getPublicKey(),this.watchOnly=!0,this.focusKeyInput()}catch(e){this.$q.notify({message:`Failed to get a public key from a Nostr extension: ${e}`,color:"warning"})}},generate(){this.key=(0,Ct.wQ)(),this.watchOnly=!1,this.focusKeyInput()},proceed(){let e=this.hexKey;var t={};this.isKey(e)?this.watchOnly?t.pub=e:t.priv=e:console.warn("Proceed called with invalid key",e),this.$store.commit("setDefaultRelays",this.selectedRelays),this.$store.dispatch("initKeys",t),this.$store.dispatch("launch"),this.initializeKeys=!1,this.$router.push({name:"settings",params:{initUser:!0}})},siwe(){zt()},addNewRelay(){this.newRelay&&this.newRelay.length&&(this.selectedRelays[this.newRelay]={read:!0,write:!1}),this.newRelay="",this.focusKeyInput()}}});var Mt=o(61123),St=o(8326),Wt=o(63190),Zt=o(67236),Rt=o(66611),Ut=o(46858),Kt=o(18149);const jt=(0,U.Z)($t,[["render",qt],["__scopeId","data-v-c5a45a50"]]),Bt=jt;O()($t,"components",{QDialog:J.Z,QCard:ee.Z,QBtn:K.Z,QExpansionItem:Mt.Z,QIcon:j.Z,QForm:St.Z,QCardSection:Wt.Z,QBtnGroup:Zt.Z,QInput:Rt.Z,QTooltip:Ut.Z,QField:Kt.Z});var Ot=o(57674),Dt=o(34136);const{getVerticalScrollPosition:Tt,setVerticalScrollPosition:It}=v.ZP,Qt=(0,s.aZ)({name:"MainLayout",components:{TheUserMenu:se,TheSearchMenu:ne.Z,TheKeyInitializationDialog:Bt},setup(){const e=(0,x.Z)();return e},data(){return{cachedPages:["Feed","Notifications","DevTools","Settings","Inbox"],middlePagePos:{},fabPos:[0,10],draggingFab:!1,broadcastChannel:new BroadcastChannel("astral"),activeWindow:!1,timeout:null,hasLaunched:!1,postEntryOpen:!1,replyEvent:null,googleFontsName:"Open Sans",updatingFont:!0,lookingAround:!1}},computed:{scrollingContainer(){return this.$q.screen.width<600?window:this.$refs.pageContainer?.$el},messageMode(){return"messages"===this.$route.name?this.replyEvent?"reply":"message":null},initializeKeys(){return!this.lookingAround}},created(){this.loadPreferences()},mounted(){this.launch(),this.enableWebLn(),document.querySelector("#left-drawer").addEventListener("wheel",this.redirectScroll,{passive:!0}),this.$router.beforeEach(((e,t)=>{this.preserveScrollPos(e,t),"messages"===e.name&&this.postEntryOpen&&(this.postEntryOpen=!1)})),this.$router.afterEach(((e,t)=>{e.path!==t.path&&this.restoreScrollPos(e,t)}));let e=this.$refs.pageContainer?.$el.getBoundingClientRect();e&&(this.fabPos[0]=e.right-e.width),this.updatingFont=!1,this.resizePostEntryPlaceholder()},beforeUnmount(){document.querySelector("#left-drawer").removeEventListener("wheel",this.redirectScroll)},methods:{redirectScroll(e){let t=Tt(this.scrollingContainer);It(this.scrollingContainer,t+e.deltaY)},preserveScrollPos(e,t){this.cachedPages.map((e=>e.toLowerCase())).includes(t.name)&&(this.middlePagePos[t.fullPath]=Tt(this.scrollingContainer))},restoreScrollPos(e,t){this.middlePagePos[e.fullPath]?It(this.scrollingContainer,this.middlePagePos[e.fullPath],500):this.scrollToTop()},scrollToTop(){It(this.scrollingContainer,0,500)},back(){this.$router.go(-1)},forward(){this.$router.go(1)},moveFab(e){this.draggingFab=!0!==e.isFirst&&!0!==e.isFinal,this.fabPos=[this.fabPos[0]-e.delta.x,this.fabPos[1]+e.delta.y]},scrollToRect(e){let t=Math.max(e.top,0);It(this.scrollingContainer,t,500)},async launch(){this.timeout=null,this.$store.state.keys.pub?this.$store.dispatch("launch"):this.$store.dispatch("launchWithoutKey"),this.hasLaunched=!0},togglePostEntry(){this.postEntryOpen=!this.postEntryOpen},setReplyEvent(e){this.replyEvent=e},resizePostEntryPlaceholder(){setTimeout((()=>{document.querySelector("#bottom-drawer-placeholder").style.minHeight=`${document.querySelector("#bottom-drawer")?.clientHeight||0}px`}),1e3)},updateFont(e){this.updatingFont=!0,(0,Ot.Z)("font",e),this.googleFontsName=e.replace(" ","+"),this.updatingFont=!1},lightOrDark(e){var t,o,s,n;return e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),t=e[1],o=e[2],s=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),t=e>>16,o=e>>8&255,s=255&e),n=Math.sqrt(t*t*.299+o*o*.587+s*s*.114),n>127.5?"light":"dark"},loadPreferences(){let{primary:e,secondary:t,accent:o,background:s}=this.$store.state.config.preferences.color;(0,Ot.Z)("primary",e),(0,Ot.Z)("secondary",t),(0,Ot.Z)("accent",o),(0,Ot.Z)("background",s),this.$q.dark.set("dark"===this.lightOrDark(s)),this.updateFont(this.$store.state.config.preferences.font)},setLookingAroundMode(){this.lookingAround=!0},async enableWebLn(){try{"undefined"!==typeof window.webln&&await window.webln.enable()}catch(e){console.log(e)}},async getRelayStat(){let e=await(0,Dt.Y8)();console.log("relayStatus",e)}}});var Ft=o(77605),Lt=o(12133),Vt=o(30627),Nt=o(88830),At=o(2873);const Yt=(0,U.Z)(Qt,[["render",b]]),Ht=Yt;O()(Qt,"components",{QLayout:Ft.Z,QDialog:J.Z,QPageContainer:Lt.Z,QSeparator:H.Z,QBtn:K.Z,QPageSticky:Vt.Z,QFab:Nt.Z,QTooltip:Ut.Z,QIcon:j.Z}),O()(Qt,"directives",{TouchPan:At.Z})}}]);