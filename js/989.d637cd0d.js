"use strict";(globalThis["webpackChunkdostr"]=globalThis["webpackChunkdostr"]||[]).push([[989],{36989:(t,e,s)=>{s.r(e),s.d(e,{default:()=>m});var a=s(59835),n=s(86970);function h(t,e,s,h,i,o){const r=(0,a.up)("BaseHeader"),d=(0,a.up)("BasePostThread"),p=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(p,{style:{"margin-top":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{"margin-left":"30px"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)("#"+this.$route.params.hashtagId),1)])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.threads,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e[0].id,events:e,onAddEvent:t.processEvent},null,8,["events","onAddEvent"])))),128))])),_:1})}var i=s(34136),o=s(18933),r=s(14473),d=s(31020);const p=(0,a.aZ)({name:"Hashtag",mixins:[o.Z,(0,d.Z)((()=>({title:`Dostr - #${window.location.pathname.split("/")[2]}`,meta:{description:{name:"description",content:`Nostr events tagged with ${window.location.pathname.split("/")[2]}`},keywords:{name:"keywords",content:"nostr decentralized social media"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}}})))],data(){return{threads:[],eventsSet:new Set,sub:{}}},watch:{"$route.params.hashtagId"(t,e){this.hashtag=t,t!==e&&t&&e&&this.stop(),t!==e&&t&&this.start()}},mounted(){this.$route.params.hashtagId&&this.start()},beforeUnmount(){this.stop()},methods:{async start(){this.threads=[],this.eventsSet=new Set;let t=Object.keys(this.$store.state.relays).length?Object.keys(this.$store.state.relays):Object.keys(this.$store.state.defaultRelays);this.sub.hashtag=await(0,i.dq)({type:"t",values:[this.$route.params.hashtagId.toLowerCase()],kinds:[1],relays:t},(t=>{for(let e of t)this.processEvent(e)}))},stop(){this.sub.hashtag&&this.sub.hashtag.cancel(),this.threads=[],this.eventsSet=new Set},processEvent(t){this.eventsSet.has(t.id)||(this.interpolateEventMentions(t),this.eventsSet.add(t.id),(0,r.c)(this.threads,t,"",t.pubkey!==this.$store.state.keys.pub),this.$store.dispatch("useProfile",{pubkey:t.pubkey}))}}});var l=s(11639),u=s(69885),c=s(69984),g=s.n(c);const w=(0,l.Z)(p,[["render",h]]),m=w;g()(p,"components",{QPage:u.Z})}}]);